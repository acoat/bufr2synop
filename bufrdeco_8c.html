<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bufr2synop: src/bufrdeco/bufrdeco.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bufr2synop<span id="projectnumber">&#160;0.24.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ada5990eeaadba62f904a1aaf3c6d89c.html">bufrdeco</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">bufrdeco.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file has the code for library bufrdeco API functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="bufrdeco_8h_source.html">bufrdeco.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bufrdeco.c:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c__incl.png" border="0" usemap="#asrc_2bufrdeco_2bufrdeco_8c" alt=""/></div>
<map name="asrc_2bufrdeco_2bufrdeco_8c" id="asrc_2bufrdeco_2bufrdeco_8c">
<area shape="rect" title="This file has the code for library bufrdeco API functions." alt="" coords="217,5,375,31"/>
<area shape="rect" title=" " alt="" coords="213,79,281,104"/>
<area shape="rect" href="bufrdeco_8h.html" title="Include header file for bufrdeco library." alt="" coords="305,79,388,104"/>
<area shape="rect" title=" " alt="" coords="5,152,67,177"/>
<area shape="rect" title=" " alt="" coords="91,152,155,177"/>
<area shape="rect" title=" " alt="" coords="179,152,245,177"/>
<area shape="rect" title=" " alt="" coords="269,152,334,177"/>
<area shape="rect" title=" " alt="" coords="359,152,428,177"/>
<area shape="rect" title=" " alt="" coords="452,152,511,177"/>
<area shape="rect" title=" " alt="" coords="535,152,598,177"/>
<area shape="rect" title=" " alt="" coords="623,152,703,177"/>
</map>
</div>
</div>
<p><a href="bufrdeco_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a94898d435d5cba9ef3bc85b9c4dde17f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a94898d435d5cba9ef3bc85b9c4dde17f">CONFIG_H</a></td></tr>
<tr class="separator:a94898d435d5cba9ef3bc85b9c4dde17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9f664c4df64e0966dad368811523196e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a9f664c4df64e0966dad368811523196e">bufrdeco_get_version</a> (char *version, size_t dversion, char *build, size_t dbuild, char *builder, size_t dbuilder, int *version_major, int *version_minor, int *version_patch)</td></tr>
<tr class="separator:a9f664c4df64e0966dad368811523196e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc93880205e1dfb437cd0a438e2ad469"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#adc93880205e1dfb437cd0a438e2ad469">bufrdeco_parse_tree</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:adc93880205e1dfb437cd0a438e2ad469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the tree of descriptors without expand the replicators.  <a href="bufrdeco_8c.html#adc93880205e1dfb437cd0a438e2ad469">More...</a><br /></td></tr>
<tr class="separator:adc93880205e1dfb437cd0a438e2ad469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9cff1700125f2b6df2e7da8d628c8d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#af9cff1700125f2b6df2e7da8d628c8d5">bufrdeco_init</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:af9cff1700125f2b6df2e7da8d628c8d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inits and allocate memory for a struct <a class="el" href="structbufrdeco.html">bufrdeco</a>.  <a href="bufrdeco_8c.html#af9cff1700125f2b6df2e7da8d628c8d5">More...</a><br /></td></tr>
<tr class="separator:af9cff1700125f2b6df2e7da8d628c8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3267bcf923b41d0dde9d4d8c8c5058d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a3267bcf923b41d0dde9d4d8c8c5058d1">bufrdeco_reset</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:a3267bcf923b41d0dde9d4d8c8c5058d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset an struct <a class="el" href="structbufrdeco.html">bufrdeco</a>. This is needed when changing to another bufr.  <a href="bufrdeco_8c.html#a3267bcf923b41d0dde9d4d8c8c5058d1">More...</a><br /></td></tr>
<tr class="separator:a3267bcf923b41d0dde9d4d8c8c5058d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5196b5f0848f6738b6362eceb074f6b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a5196b5f0848f6738b6362eceb074f6b5">bufrdeco_set_out_stream</a> (FILE *out, struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:a5196b5f0848f6738b6362eceb074f6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the library normal output stream.  <a href="bufrdeco_8c.html#a5196b5f0848f6738b6362eceb074f6b5">More...</a><br /></td></tr>
<tr class="separator:a5196b5f0848f6738b6362eceb074f6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9684a698515a222e863c6cb68162b628"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a9684a698515a222e863c6cb68162b628">bufrdeco_set_err_stream</a> (FILE *err, struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:a9684a698515a222e863c6cb68162b628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the error stream.  <a href="bufrdeco_8c.html#a9684a698515a222e863c6cb68162b628">More...</a><br /></td></tr>
<tr class="separator:a9684a698515a222e863c6cb68162b628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe6bc0c46327ed8db54b7a471f31504"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a8fe6bc0c46327ed8db54b7a471f31504">bufrdeco_close</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:a8fe6bc0c46327ed8db54b7a471f31504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all allocated memory. Needed when no more task to do with bufrdeco library.  <a href="bufrdeco_8c.html#a8fe6bc0c46327ed8db54b7a471f31504">More...</a><br /></td></tr>
<tr class="separator:a8fe6bc0c46327ed8db54b7a471f31504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7618eeff4a75408eb25e086999de2883"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a7618eeff4a75408eb25e086999de2883">bufrdeco_set_tables_dir</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b, char *tables_dir)</td></tr>
<tr class="memdesc:a7618eeff4a75408eb25e086999de2883"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the directory path for BUFR tables. Needed if it is not any default directories.  <a href="bufrdeco_8c.html#a7618eeff4a75408eb25e086999de2883">More...</a><br /></td></tr>
<tr class="separator:a7618eeff4a75408eb25e086999de2883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429725844ceb27af702275748a444f2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#a429725844ceb27af702275748a444f2b">bufrdeco_get_bufr</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b, char *filename)</td></tr>
<tr class="memdesc:a429725844ceb27af702275748a444f2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read file and try to find a bufr report inserted in. Once found do the same that <a class="el" href="bufrdeco_8h.html#ae3cfc6802c196511223adc0a6324e4af">bufrdeco_read_bufr()</a>  <a href="bufrdeco_8c.html#a429725844ceb27af702275748a444f2b">More...</a><br /></td></tr>
<tr class="separator:a429725844ceb27af702275748a444f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc165203de787081aa568ee171d145ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#adc165203de787081aa568ee171d145ff">bufrdeco_write_subset_offset_bits</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b, char *filename)</td></tr>
<tr class="memdesc:adc165203de787081aa568ee171d145ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write offset bit array for subsets in a non-compressed bufr.  <a href="bufrdeco_8c.html#adc165203de787081aa568ee171d145ff">More...</a><br /></td></tr>
<tr class="separator:adc165203de787081aa568ee171d145ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d3f64970b29cece5689f91dec844b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#ae0d3f64970b29cece5689f91dec844b2">bufrdeco_read_subset_offset_bits</a> (struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b, char *filename)</td></tr>
<tr class="memdesc:ae0d3f64970b29cece5689f91dec844b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write offset bit array for subsets in a non-compressed bufr.  <a href="bufrdeco_8c.html#ae0d3f64970b29cece5689f91dec844b2">More...</a><br /></td></tr>
<tr class="separator:ae0d3f64970b29cece5689f91dec844b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead4ed5a0bc1b6ce477095653107e548"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbufrdeco__subset__sequence__data.html">bufrdeco_subset_sequence_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrdeco_8c.html#aead4ed5a0bc1b6ce477095653107e548">bufrdeco_get_target_subset_sequence_data</a> (<a class="el" href="bufrdeco_8h.html#a099b48da0db8498c21d1d3a10cef8f89">buf_t</a> nset, struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *b)</td></tr>
<tr class="memdesc:aead4ed5a0bc1b6ce477095653107e548"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the struct <a class="el" href="structbufrdeco.html">bufrdeco</a> to get data from the solicited subset.  <a href="bufrdeco_8c.html#aead4ed5a0bc1b6ce477095653107e548">More...</a><br /></td></tr>
<tr class="separator:aead4ed5a0bc1b6ce477095653107e548"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file has the code for library bufrdeco API functions. </p>

<p class="definition">Definition in file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a94898d435d5cba9ef3bc85b9c4dde17f" name="a94898d435d5cba9ef3bc85b9c4dde17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94898d435d5cba9ef3bc85b9c4dde17f">&#9670;&#160;</a></span>CONFIG_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_H</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00026">26</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8fe6bc0c46327ed8db54b7a471f31504" name="a8fe6bc0c46327ed8db54b7a471f31504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fe6bc0c46327ed8db54b7a471f31504">&#9670;&#160;</a></span>bufrdeco_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free all allocated memory. Needed when no more task to do with bufrdeco library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to the target struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If succeeded return 0, otherwise 1</dd></dl>
<p>This function must be called at the end when no more calls to bufrdeco library is needed</p>
<p >b-&gt;out and b-&gt;err must be closed by caller if are not the default stdout or stderr </p>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00259">259</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  260</span>{</div>
<div class="line"><span class="lineno">  261</span>  <a class="code hl_define" href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a> ( b != NULL );</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  <span class="comment">// first deallocate all memory</span></div>
<div class="line"><span class="lineno">  264</span>  <a class="code hl_function" href="bufrdeco_8h.html#a14e60e0905769f56485daf274c486d81">bufrdeco_free_subset_sequence_data</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a1fc826906a1abe2cab6272f16e60feb6">seq</a> ) );</div>
<div class="line"><span class="lineno">  265</span>  <a class="code hl_function" href="bufrdeco_8h.html#ada70fb2f449cb542b987acee73b8d494">bufrdeco_free_compressed_data_references</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a8321adc42a6d83888d2e0833c871c687">refs</a> ) );</div>
<div class="line"><span class="lineno">  266</span>  <a class="code hl_function" href="bufrdeco_8h.html#aae49b482b2986da2bc5971ee16e33048">bufrdeco_free_expanded_tree</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ad7fa6f29977ceceff224c214a23aa839">tree</a> ) );</div>
<div class="line"><span class="lineno">  267</span>  <span class="keywordflow">if</span> (b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a> &amp; <a class="code hl_define" href="bufrdeco_8h.html#a95f0a41e4b897318b31febc5090ab997">BUFRDECO_USE_TABLES_CACHE</a>)</div>
<div class="line"><span class="lineno">  268</span>  {</div>
<div class="line"><span class="lineno">  269</span>    <a class="code hl_function" href="bufrdeco_8h.html#a554ec62c68ff48925248a2fa4a919b3f">bufrdeco_free_cache_tables</a>(&amp;(b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a7b905518741b6fb16e8387c66e42a60e">cache</a>));</div>
<div class="line"><span class="lineno">  270</span>    b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">tables</a> = 0;</div>
<div class="line"><span class="lineno">  271</span>  }</div>
<div class="line"><span class="lineno">  272</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  273</span>  {</div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_function" href="bufrdeco_8h.html#a2a95716a5863b3b9fa6ecfcf26f19d1e">bufrdeco_free_tables</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">tables</a> ) );</div>
<div class="line"><span class="lineno">  275</span>  }</div>
<div class="line"><span class="lineno">  276</span>  <a class="code hl_function" href="bufrdeco_8h.html#a5b5f882b643f32686ecae247e71974ac">bufrdeco_free_bitmap_array</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a16e9ef0d0725017a0fec29bc70f7081f">bitmap</a> ) );</div>
<div class="line"><span class="lineno">  277</span>  </div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  279</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a142902ec0ad75f8ae60946f7e3065f42"><div class="ttname"><a href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a></div><div class="ttdeci">#define bufrdeco_assert(__my_expr__)</div><div class="ttdoc">Check a expression and exit if it fails.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00374">bufrdeco.h:374</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a14e60e0905769f56485daf274c486d81"><div class="ttname"><a href="bufrdeco_8h.html#a14e60e0905769f56485daf274c486d81">bufrdeco_free_subset_sequence_data</a></div><div class="ttdeci">int bufrdeco_free_subset_sequence_data(struct bufrdeco_subset_sequence_data *ba)</div><div class="ttdoc">Free the memory for sequence array in a struct bufrdeco_subset_sequence_data.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00183">bufrdeco_memory.c:183</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a2a95716a5863b3b9fa6ecfcf26f19d1e"><div class="ttname"><a href="bufrdeco_8h.html#a2a95716a5863b3b9fa6ecfcf26f19d1e">bufrdeco_free_tables</a></div><div class="ttdeci">int bufrdeco_free_tables(struct bufr_tables **t)</div><div class="ttdoc">Frees the allocated space for a struct bufr_tables.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00051">bufrdeco_memory.c:51</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a554ec62c68ff48925248a2fa4a919b3f"><div class="ttname"><a href="bufrdeco_8h.html#a554ec62c68ff48925248a2fa4a919b3f">bufrdeco_free_cache_tables</a></div><div class="ttdeci">int bufrdeco_free_cache_tables(struct bufr_tables_cache *c)</div><div class="ttdoc">deallocate and clean a bufr_tables_cache</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__wmo_8c_source.html#l00322">bufrdeco_wmo.c:322</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a5b5f882b643f32686ecae247e71974ac"><div class="ttname"><a href="bufrdeco_8h.html#a5b5f882b643f32686ecae247e71974ac">bufrdeco_free_bitmap_array</a></div><div class="ttdeci">int bufrdeco_free_bitmap_array(struct bufrdeco_bitmap_array *a)</div><div class="ttdoc">Free an allocated bitmap array.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00331">bufrdeco_memory.c:331</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a95f0a41e4b897318b31febc5090ab997"><div class="ttname"><a href="bufrdeco_8h.html#a95f0a41e4b897318b31febc5090ab997">BUFRDECO_USE_TABLES_CACHE</a></div><div class="ttdeci">#define BUFRDECO_USE_TABLES_CACHE</div><div class="ttdoc">Bit mask to the member mask of struct bufrdeco to mark the use of bufr_tables cache.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00268">bufrdeco.h:268</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_aae49b482b2986da2bc5971ee16e33048"><div class="ttname"><a href="bufrdeco_8h.html#aae49b482b2986da2bc5971ee16e33048">bufrdeco_free_expanded_tree</a></div><div class="ttdeci">int bufrdeco_free_expanded_tree(struct bufrdeco_expanded_tree **t)</div><div class="ttdoc">Frees the allocated space for a struct bufrdeco_expanded_tree.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00089">bufrdeco_memory.c:89</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_ada70fb2f449cb542b987acee73b8d494"><div class="ttname"><a href="bufrdeco_8h.html#ada70fb2f449cb542b987acee73b8d494">bufrdeco_free_compressed_data_references</a></div><div class="ttdeci">int bufrdeco_free_compressed_data_references(struct bufrdeco_compressed_data_references *rf)</div><div class="ttdoc">Free the memory allocated for array of references in a struct bufrdeco_compressed_data_references.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00250">bufrdeco_memory.c:250</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a16e9ef0d0725017a0fec29bc70f7081f"><div class="ttname"><a href="structbufrdeco.html#a16e9ef0d0725017a0fec29bc70f7081f">bufrdeco::bitmap</a></div><div class="ttdeci">struct bufrdeco_bitmap_array bitmap</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00980">bufrdeco.h:980</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a1fc826906a1abe2cab6272f16e60feb6"><div class="ttname"><a href="structbufrdeco.html#a1fc826906a1abe2cab6272f16e60feb6">bufrdeco::seq</a></div><div class="ttdeci">struct bufrdeco_subset_sequence_data seq</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00979">bufrdeco.h:979</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a22b38bbd630adc6a582ad2861c1f7787"><div class="ttname"><a href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">bufrdeco::mask</a></div><div class="ttdeci">uint32_t mask</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00966">bufrdeco.h:966</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a7b905518741b6fb16e8387c66e42a60e"><div class="ttname"><a href="structbufrdeco.html#a7b905518741b6fb16e8387c66e42a60e">bufrdeco::cache</a></div><div class="ttdeci">struct bufr_tables_cache cache</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00974">bufrdeco.h:974</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a8321adc42a6d83888d2e0833c871c687"><div class="ttname"><a href="structbufrdeco.html#a8321adc42a6d83888d2e0833c871c687">bufrdeco::refs</a></div><div class="ttdeci">struct bufrdeco_compressed_data_references refs</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00978">bufrdeco.h:978</a></div></div>
<div class="ttc" id="astructbufrdeco_html_ab14126b70642ce84fde7d0fbe37662da"><div class="ttname"><a href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">bufrdeco::tables</a></div><div class="ttdeci">struct bufr_tables * tables</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00973">bufrdeco.h:973</a></div></div>
<div class="ttc" id="astructbufrdeco_html_ad7fa6f29977ceceff224c214a23aa839"><div class="ttname"><a href="structbufrdeco.html#ad7fa6f29977ceceff224c214a23aa839">bufrdeco::tree</a></div><div class="ttdeci">struct bufrdeco_expanded_tree * tree</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00975">bufrdeco.h:975</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00980">bufrdeco::bitmap</a>, <a class="el" href="bufrdeco_8h_source.html#l00374">bufrdeco_assert</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00331">bufrdeco_free_bitmap_array()</a>, <a class="el" href="bufrdeco__wmo_8c_source.html#l00322">bufrdeco_free_cache_tables()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00250">bufrdeco_free_compressed_data_references()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00089">bufrdeco_free_expanded_tree()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00183">bufrdeco_free_subset_sequence_data()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00051">bufrdeco_free_tables()</a>, <a class="el" href="bufrdeco_8h_source.html#l00268">BUFRDECO_USE_TABLES_CACHE</a>, <a class="el" href="bufrdeco_8h_source.html#l00974">bufrdeco::cache</a>, <a class="el" href="bufrdeco_8h_source.html#l00966">bufrdeco::mask</a>, <a class="el" href="bufrdeco_8h_source.html#l00978">bufrdeco::refs</a>, <a class="el" href="bufrdeco_8h_source.html#l00979">bufrdeco::seq</a>, <a class="el" href="bufrdeco_8h_source.html#l00973">bufrdeco::tables</a>, and <a class="el" href="bufrdeco_8h_source.html#l00975">bufrdeco::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2bufrdeco__json_8c_source.html#l00188">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_cgraph.png" border="0" usemap="#abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_cgraph" alt=""/></div>
<map name="abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_cgraph" id="abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_cgraph">
<area shape="rect" title="Free all allocated memory. Needed when no more task to do with bufrdeco library." alt="" coords="5,170,116,195"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a5b5f882b643f32686ecae247e71974ac" title="Free an allocated bitmap array." alt="" coords="187,5,334,45"/>
<area shape="rect" href="bufrdeco__wmo_8c.html#a554ec62c68ff48925248a2fa4a919b3f" title="deallocate and clean a bufr_tables_cache" alt="" coords="189,69,332,109"/>
<area shape="rect" href="bufrdeco__memory_8c.html#ada70fb2f449cb542b987acee73b8d494" title="Free the memory allocated for array of references in a struct bufrdeco_compressed_data_references." alt="" coords="171,133,350,173"/>
<area shape="rect" href="bufrdeco__memory_8c.html#aae49b482b2986da2bc5971ee16e33048" title="Frees the allocated space for a struct bufrdeco_expanded_tree." alt="" coords="164,198,357,223"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a14e60e0905769f56485daf274c486d81" title="Free the memory for sequence array in a struct bufrdeco_subset_sequence_data." alt="" coords="187,248,334,288"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a2a95716a5863b3b9fa6ecfcf26f19d1e" title="Frees the allocated space for a struct bufr_tables." alt="" coords="189,313,332,338"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_icgraph.png" border="0" usemap="#abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_icgraph" alt=""/></div>
<map name="abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_icgraph" id="abufrdeco_8c_a8fe6bc0c46327ed8db54b7a471f31504_icgraph">
<area shape="rect" title="Free all allocated memory. Needed when no more task to do with bufrdeco library." alt="" coords="104,5,215,31"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,31"/>
</map>
</div>

</div>
</div>
<a id="a429725844ceb27af702275748a444f2b" name="a429725844ceb27af702275748a444f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a429725844ceb27af702275748a444f2b">&#9670;&#160;</a></span>bufrdeco_get_bufr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_get_bufr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read file and try to find a bufr report inserted in. Once found do the same that <a class="el" href="bufrdeco_8h.html#ae3cfc6802c196511223adc0a6324e4af">bufrdeco_read_bufr()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to struct <a class="el" href="structbufrdeco.html">bufrdeco</a> </td></tr>
    <tr><td class="paramname">filename</td><td>complete path of BUFR file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if all is OK, 1 otherwise</dd></dl>
<p>This function does the folowing tasks:</p><ul>
<li>Try to find first buffer of bytes begining with 'BUFR' chars and ending with '7777'. This will be considered as a bufr file.</li>
<li>Read the file and checks the marks at the begining and end to see wheter is a BUFR file</li>
<li>Init the structs and allocate the needed memory for raw data if not done previously</li>
<li>Splits and parse the BUFR sections (without expanding descriptors nor parsing data)</li>
<li>Reads the needed Table files and store them in memory. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00315">315</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  316</span>{</div>
<div class="line"><span class="lineno">  317</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( b != NULL || filename == NULL, 1 );</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="bufrdeco_8h.html#ad44753d6491d1785ed3fe38af6557da6">bufrdeco_extract_bufr</a> ( b, filename );</div>
<div class="line"><span class="lineno">  320</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a7867baabc50a595b9d3e4853b76011ad"><div class="ttname"><a href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a></div><div class="ttdeci">#define bufrdeco_assert_with_return_val(__my_expr__, __returnval__)</div><div class="ttdoc">Check a expression and returns a given value if it fails.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00385">bufrdeco.h:385</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_ad44753d6491d1785ed3fe38af6557da6"><div class="ttname"><a href="bufrdeco_8h.html#ad44753d6491d1785ed3fe38af6557da6">bufrdeco_extract_bufr</a></div><div class="ttdeci">int bufrdeco_extract_bufr(struct bufrdeco *b, char *filename)</div><div class="ttdoc">Read file and try to find a bufr report inserted in. Once found do the same that bufrdeco_read_file()</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__read_8c_source.html#l00120">bufrdeco_read.c:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00385">bufrdeco_assert_with_return_val</a>, and <a class="el" href="bufrdeco__read_8c_source.html#l00120">bufrdeco_extract_bufr()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a429725844ceb27af702275748a444f2b_cgraph.png" border="0" usemap="#abufrdeco_8c_a429725844ceb27af702275748a444f2b_cgraph" alt=""/></div>
<map name="abufrdeco_8c_a429725844ceb27af702275748a444f2b_cgraph" id="abufrdeco_8c_a429725844ceb27af702275748a444f2b_cgraph">
<area shape="rect" title="Read file and try to find a bufr report inserted in. Once found do the same that bufrdeco_read_bufr()" alt="" coords="5,335,132,360"/>
<area shape="rect" href="bufrdeco__read_8c.html#ad44753d6491d1785ed3fe38af6557da6" title="Read file and try to find a bufr report inserted in. Once found do the same that bufrdeco_read_file()" alt="" coords="180,335,328,360"/>
<area shape="rect" href="bufrdeco__read_8c.html#a42b3789e2ddabf25f894e78f59897268" title=" " alt="" coords="376,335,520,360"/>
<area shape="rect" href="bufrdeco__wmo_8c.html#a690c1bdb0a65ccaa1391f64ea8df2fc6" title="Read the tables according with bufr file data from a bufr table directory." alt="" coords="594,161,713,187"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a610dc833131f1bd789d265d5c6d08343" title=" " alt="" coords="568,211,739,236"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a026c518e93d27df9fde9c1c9a68b5bc0" title="Print info form sec 1 in json format." alt="" coords="568,260,739,285"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a04d3a2431bd8efc51ac93e8a40d41da0" title="Print info form optional sec 2 in json format." alt="" coords="568,309,739,335"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a8b2717d06a435471a2ecd983cc5c615f" title="Print info form sec 3 in json format." alt="" coords="568,359,739,384"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a1a8996af46cd7bc0bacb76c46a453c01" title="returns the uint32_t value from an array of three bytes, most significant first" alt="" coords="578,408,729,433"/>
<area shape="rect" href="bufrdeco__utils_8c.html#ae5a6eb08d7b5c59b5d53136af36be22c" title="set a struct bufr_descriptor from two consecutive bytes in bufr file" alt="" coords="571,457,735,483"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a0a8466d777dfa02324b7f13316ea71fb" title="returns the uint32_t value from an array of two bytes, most significant first" alt="" coords="582,507,725,532"/>
<area shape="rect" href="bufrdeco__tableB_8c.html#ae1e363f8ede994991842fe230e327918" title=" " alt="" coords="805,5,925,31"/>
<area shape="rect" href="bufrdeco__tableC_8c.html#a225eb080f58ab76ab10872400140dc03" title="Reads a file with table C content (Code table and bit flags) according with csv WMO format." alt="" coords="804,55,925,80"/>
<area shape="rect" href="bufrdeco__tableD_8c.html#a48da10ad04b938f7d0385e83aabf75f8" title="Reads a file with table D content according with WMO csv format." alt="" coords="804,104,925,129"/>
<area shape="rect" href="bufrdeco__wmo_8c.html#acbe10abf7cfd44a4d185e37915856e98" title="Search a struct bufr_tables in bufr_tables_cache." alt="" coords="787,154,943,194"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a0576a87972353fb9e7a569fa1f905e03" title="Init a struct bufr_tables allocating space." alt="" coords="997,244,1135,269"/>
<area shape="rect" href="bufrdeco__wmo_8c.html#a9a6f68130c76bab155e074c2e98273ce" title="Init an element of array c&#45;&gt;tab[] if still not allocated. If allocated clean it and set *t pointing t..." alt="" coords="789,219,940,244"/>
<area shape="rect" href="bufrdeco__wmo_8c.html#a8581ce4806d095d950244b72411ad66d" title="Get the complete pathnames for WMO csv table files needed by a bufr message." alt="" coords="790,320,939,345"/>
<area shape="rect" href="bufrdeco__csv_8c.html#a9685dcec12aa968d7146aa55965dda5e" title="Parse a csv line." alt="" coords="1011,80,1121,105"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a21db34de4334426d1c212ffdabee02cb" title="parse an integer with a descriptor fom bufr ECWMF libary" alt="" coords="991,31,1141,56"/>
</map>
</div>

</div>
</div>
<a id="aead4ed5a0bc1b6ce477095653107e548" name="aead4ed5a0bc1b6ce477095653107e548"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead4ed5a0bc1b6ce477095653107e548">&#9670;&#160;</a></span>bufrdeco_get_target_subset_sequence_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbufrdeco__subset__sequence__data.html">bufrdeco_subset_sequence_data</a> * bufrdeco_get_target_subset_sequence_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bufrdeco_8h.html#a099b48da0db8498c21d1d3a10cef8f89">buf_t</a>&#160;</td>
          <td class="paramname"><em>nset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare the struct <a class="el" href="structbufrdeco.html">bufrdeco</a> to get data from the solicited subset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nset</td><td>index of subset we want to parse and get data. First subset in a BUFR file has index 0. </td></tr>
    <tr><td class="paramname">b</td><td>pointer to the struct <a class="el" href="structbufrdeco.html">bufrdeco</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If succeeded returns a pointer to the struct <a class="el" href="structbufrdeco__subset__sequence__data.html">bufrdeco_subset_sequence_data</a> with the results for the desired subset, otherwise returns NULL </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00396">396</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  397</span>{</div>
<div class="line"><span class="lineno">  398</span>  <a class="code hl_typedef" href="bufrdeco_8h.html#a099b48da0db8498c21d1d3a10cef8f89">buf_t</a> n = 0;</div>
<div class="line"><span class="lineno">  399</span>  <a class="code hl_define" href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a> ( b != NULL );</div>
<div class="line"><span class="lineno">  400</span>  uint32_t mask0 = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a>;</div>
<div class="line"><span class="lineno">  401</span>  </div>
<div class="line"><span class="lineno">  402</span>  <span class="keywordflow">if</span> ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#abb756c92c56bb507a2283cdf9af3e081">sec3</a>.<a class="code hl_variable" href="structbufr__sec3.html#aa0bf30849cdb359a413e765c410804f0">subsets</a> &lt;= nset )</div>
<div class="line"><span class="lineno">  403</span>    {</div>
<div class="line"><span class="lineno">  404</span>      snprintf ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a>, sizeof ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a> ), <span class="stringliteral">&quot;%s(): The index of target subset is over the bufr subsets (%d)\n&quot;</span>, __func__, b-&gt;<a class="code hl_variable" href="structbufrdeco.html#abb756c92c56bb507a2283cdf9af3e081">sec3</a>.<a class="code hl_variable" href="structbufr__sec3.html#aa0bf30849cdb359a413e765c410804f0">subsets</a> );</div>
<div class="line"><span class="lineno">  405</span>      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  406</span>    }</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>  <span class="keywordflow">if</span> ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#abb756c92c56bb507a2283cdf9af3e081">sec3</a>.<a class="code hl_variable" href="structbufr__sec3.html#a16609db832e61489e8f6875217c1cb16">compressed</a> )</div>
<div class="line"><span class="lineno">  409</span>    {</div>
<div class="line"><span class="lineno">  410</span><span class="preprocessor">#ifdef __DEBUG</span></div>
<div class="line"><span class="lineno">  411</span>      printf (<span class="stringliteral">&quot;# Compressed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  412</span><span class="preprocessor">#endif      </span></div>
<div class="line"><span class="lineno">  413</span>      <span class="comment">// case of compressed, we just need the compressed references</span></div>
<div class="line"><span class="lineno">  414</span>      <span class="keywordflow">if</span> ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a8321adc42a6d83888d2e0833c871c687">refs</a>.<a class="code hl_variable" href="structbufrdeco__compressed__data__references.html#a7b0324e5fd646dacb42a2ab85e5cc86b">nd</a> == 0 )</div>
<div class="line"><span class="lineno">  415</span>        {</div>
<div class="line"><span class="lineno">  416</span>          <span class="comment">// case of compressed data and still not parsed the refs</span></div>
<div class="line"><span class="lineno">  417</span>          <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#ab5056984d71413ec42f7bb6971de2ce8">bufrdeco_parse_compressed</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a8321adc42a6d83888d2e0833c871c687">refs</a> ), b ) )</div>
<div class="line"><span class="lineno">  418</span>            {</div>
<div class="line"><span class="lineno">  419</span>              <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  420</span>            }</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>        }</div>
<div class="line"><span class="lineno">  423</span>    }</div>
<div class="line"><span class="lineno">  424</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( nset &gt; 0 )</div>
<div class="line"><span class="lineno">  425</span>    {</div>
<div class="line"><span class="lineno">  426</span>      <span class="comment">// In case of not compressed bufr, to parse a subset we need to know the bit offset of the subset data in sec4</span></div>
<div class="line"><span class="lineno">  427</span>      <span class="comment">// There are only two ways to know that offset:</span></div>
<div class="line"><span class="lineno">  428</span>      <span class="comment">//    1) Parse the data of all prior subsets from n = 0 to (nset - 1).</span></div>
<div class="line"><span class="lineno">  429</span>      <span class="comment">//    2) Get the subset bit offset from the struct bufrdeco_subset_bit_offset already stored.</span></div>
<div class="line"><span class="lineno">  430</span>      <span class="comment">//       This is only possible if we already parsed this subset in this session (among two bufrdeco_reset() calls)</span></div>
<div class="line"><span class="lineno">  431</span>      <span class="comment">//       or if readed the struct from a file</span></div>
<div class="line"><span class="lineno">  432</span>      <span class="comment">// In any case the subset bit offset array must be poluted for all n &lt; (nset - 1)</span></div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>      <span class="comment">// clear bit BUFRDECO_OUTPUT_JSON_SUBSET_DATA if actived</span></div>
<div class="line"><span class="lineno">  435</span>      b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a> &amp;= ~((uint32_t) <a class="code hl_define" href="bufrdeco_8h.html#a5d0f2220ca0503c3f21f76591c630748">BUFRDECO_OUTPUT_JSON_SUBSET_DATA</a>);</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>      <span class="keywordflow">if</span> ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a9b3eff19e02659f516800b6abe0e718c">offsets</a>.<a class="code hl_variable" href="structbufrdeco__subset__bit__offsets.html#a09cf11534812d8549acc202420c738f2">nr</a> == 0 || b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a9b3eff19e02659f516800b6abe0e718c">offsets</a>.<a class="code hl_variable" href="structbufrdeco__subset__bit__offsets.html#adbb90d2df5124e1fd9eb4fd5ae261fe1">ofs</a>[nset] == 0 )</div>
<div class="line"><span class="lineno">  438</span>        {</div>
<div class="line"><span class="lineno">  439</span>          <span class="keywordflow">for</span> ( n = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#aaff22391e2e9a99ad0051d1a23fdb484">state</a>.<a class="code hl_variable" href="structbufrdeco__decoding__data__state.html#af51d9374229737ca7fc366c91e8b1276">subset</a> ; n &lt; nset ; n++ )</div>
<div class="line"><span class="lineno">  440</span>            {</div>
<div class="line"><span class="lineno">  441</span>              <span class="comment">// In every call to bufrdeco_decode_data_subset(), b-&gt;state.subset is incremented and b-&gt;offsets is updated if needed</span></div>
<div class="line"><span class="lineno">  442</span><span class="preprocessor">#ifdef __DEBUG</span></div>
<div class="line"><span class="lineno">  443</span>              printf (<span class="stringliteral">&quot;# Go to parse for subset %lu waiting %lu\n&quot;</span>, b-&gt;<a class="code hl_variable" href="structbufrdeco.html#aaff22391e2e9a99ad0051d1a23fdb484">state</a>.<a class="code hl_variable" href="structbufrdeco__decoding__data__state.html#af51d9374229737ca7fc366c91e8b1276">subset</a>, nset);</div>
<div class="line"><span class="lineno">  444</span><span class="preprocessor">#endif              </span></div>
<div class="line"><span class="lineno">  445</span>              <a class="code hl_function" href="bufrdeco_8h.html#ae2d3eb10e84c09bd0d282f510bf720ee">bufrdeco_decode_data_subset</a> ( b );</div>
<div class="line"><span class="lineno">  446</span>            }</div>
<div class="line"><span class="lineno">  447</span>        }</div>
<div class="line"><span class="lineno">  448</span>    }</div>
<div class="line"><span class="lineno">  449</span>  <span class="comment">// Once the previous task is made, we just adjust the subset</span></div>
<div class="line"><span class="lineno">  450</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#aaff22391e2e9a99ad0051d1a23fdb484">state</a>.<a class="code hl_variable" href="structbufrdeco__decoding__data__state.html#af51d9374229737ca7fc366c91e8b1276">subset</a> = nset;</div>
<div class="line"><span class="lineno">  451</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a> = mask0;</div>
<div class="line"><span class="lineno">  452</span>  </div>
<div class="line"><span class="lineno">  453</span>  <span class="comment">// and now parse and get the desired subset data</span></div>
<div class="line"><span class="lineno">  454</span><span class="preprocessor">#ifdef __DEBUG  </span></div>
<div class="line"><span class="lineno">  455</span>  printf (<span class="stringliteral">&quot;# Finally going to target parse for subset %lu\n&quot;</span>, b-&gt;<a class="code hl_variable" href="structbufrdeco.html#aaff22391e2e9a99ad0051d1a23fdb484">state</a>.<a class="code hl_variable" href="structbufrdeco__decoding__data__state.html#af51d9374229737ca7fc366c91e8b1276">subset</a>);</div>
<div class="line"><span class="lineno">  456</span><span class="preprocessor">#endif  </span></div>
<div class="line"><span class="lineno">  457</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="bufrdeco_8h.html#a0e0289d12b117e4df8f37f14486d3d71">bufrdeco_get_subset_sequence_data</a> ( b );</div>
<div class="line"><span class="lineno">  458</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a099b48da0db8498c21d1d3a10cef8f89"><div class="ttname"><a href="bufrdeco_8h.html#a099b48da0db8498c21d1d3a10cef8f89">buf_t</a></div><div class="ttdeci">uint32_t buf_t</div><div class="ttdoc">Type to set offsets and dimension of arrays or counters used in bufrdeco.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00346">bufrdeco.h:346</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a0e0289d12b117e4df8f37f14486d3d71"><div class="ttname"><a href="bufrdeco_8h.html#a0e0289d12b117e4df8f37f14486d3d71">bufrdeco_get_subset_sequence_data</a></div><div class="ttdeci">struct bufrdeco_subset_sequence_data * bufrdeco_get_subset_sequence_data(struct bufrdeco *b)</div><div class="ttdoc">Parse and get a struct bufrdeco_subset_sequence_data.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__data_8c_source.html#l00039">bufrdeco_data.c:39</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a5d0f2220ca0503c3f21f76591c630748"><div class="ttname"><a href="bufrdeco_8h.html#a5d0f2220ca0503c3f21f76591c630748">BUFRDECO_OUTPUT_JSON_SUBSET_DATA</a></div><div class="ttdeci">#define BUFRDECO_OUTPUT_JSON_SUBSET_DATA</div><div class="ttdoc">Bit mask to the member mask of struct bufrdeco to print bufr subset data in json format.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00299">bufrdeco.h:299</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_ab5056984d71413ec42f7bb6971de2ce8"><div class="ttname"><a href="bufrdeco_8h.html#ab5056984d71413ec42f7bb6971de2ce8">bufrdeco_parse_compressed</a></div><div class="ttdeci">int bufrdeco_parse_compressed(struct bufrdeco_compressed_data_references *r, struct bufrdeco *b)</div><div class="ttdoc">Preliminary parse of a compressed data bufr.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__compressed_8c_source.html#l00040">bufrdeco_compressed.c:40</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_ae2d3eb10e84c09bd0d282f510bf720ee"><div class="ttname"><a href="bufrdeco_8h.html#ae2d3eb10e84c09bd0d282f510bf720ee">bufrdeco_decode_data_subset</a></div><div class="ttdeci">int bufrdeco_decode_data_subset(struct bufrdeco *b)</div><div class="ttdoc">User interface to decode a BUFR subset.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__data_8c_source.html#l00062">bufrdeco_data.c:62</a></div></div>
<div class="ttc" id="astructbufr__sec3_html_a16609db832e61489e8f6875217c1cb16"><div class="ttname"><a href="structbufr__sec3.html#a16609db832e61489e8f6875217c1cb16">bufr_sec3::compressed</a></div><div class="ttdeci">uint8_t compressed</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00812">bufrdeco.h:812</a></div></div>
<div class="ttc" id="astructbufr__sec3_html_aa0bf30849cdb359a413e765c410804f0"><div class="ttname"><a href="structbufr__sec3.html#aa0bf30849cdb359a413e765c410804f0">bufr_sec3::subsets</a></div><div class="ttdeci">uint32_t subsets</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00810">bufrdeco.h:810</a></div></div>
<div class="ttc" id="astructbufrdeco__compressed__data__references_html_a7b0324e5fd646dacb42a2ab85e5cc86b"><div class="ttname"><a href="structbufrdeco__compressed__data__references.html#a7b0324e5fd646dacb42a2ab85e5cc86b">bufrdeco_compressed_data_references::nd</a></div><div class="ttdeci">buf_t nd</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00670">bufrdeco.h:670</a></div></div>
<div class="ttc" id="astructbufrdeco__decoding__data__state_html_af51d9374229737ca7fc366c91e8b1276"><div class="ttname"><a href="structbufrdeco__decoding__data__state.html#af51d9374229737ca7fc366c91e8b1276">bufrdeco_decoding_data_state::subset</a></div><div class="ttdeci">buf_t subset</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00525">bufrdeco.h:525</a></div></div>
<div class="ttc" id="astructbufrdeco__subset__bit__offsets_html_a09cf11534812d8549acc202420c738f2"><div class="ttname"><a href="structbufrdeco__subset__bit__offsets.html#a09cf11534812d8549acc202420c738f2">bufrdeco_subset_bit_offsets::nr</a></div><div class="ttdeci">buf_t nr</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00686">bufrdeco.h:686</a></div></div>
<div class="ttc" id="astructbufrdeco__subset__bit__offsets_html_adbb90d2df5124e1fd9eb4fd5ae261fe1"><div class="ttname"><a href="structbufrdeco__subset__bit__offsets.html#adbb90d2df5124e1fd9eb4fd5ae261fe1">bufrdeco_subset_bit_offsets::ofs</a></div><div class="ttdeci">buf_t ofs[BUFR_MAX_SUBSETS]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00687">bufrdeco.h:687</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a9b3eff19e02659f516800b6abe0e718c"><div class="ttname"><a href="structbufrdeco.html#a9b3eff19e02659f516800b6abe0e718c">bufrdeco::offsets</a></div><div class="ttdeci">struct bufrdeco_subset_bit_offsets offsets</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00977">bufrdeco.h:977</a></div></div>
<div class="ttc" id="astructbufrdeco_html_aaff22391e2e9a99ad0051d1a23fdb484"><div class="ttname"><a href="structbufrdeco.html#aaff22391e2e9a99ad0051d1a23fdb484">bufrdeco::state</a></div><div class="ttdeci">struct bufrdeco_decoding_data_state state</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00976">bufrdeco.h:976</a></div></div>
<div class="ttc" id="astructbufrdeco_html_abb756c92c56bb507a2283cdf9af3e081"><div class="ttname"><a href="structbufrdeco.html#abb756c92c56bb507a2283cdf9af3e081">bufrdeco::sec3</a></div><div class="ttdeci">struct bufr_sec3 sec3</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00971">bufrdeco.h:971</a></div></div>
<div class="ttc" id="astructbufrdeco_html_ae34e327b324693e4e50477945c1e22aa"><div class="ttname"><a href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">bufrdeco::error</a></div><div class="ttdeci">char error[1024]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00983">bufrdeco.h:983</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00374">bufrdeco_assert</a>, <a class="el" href="bufrdeco__data_8c_source.html#l00062">bufrdeco_decode_data_subset()</a>, <a class="el" href="bufrdeco__data_8c_source.html#l00039">bufrdeco_get_subset_sequence_data()</a>, <a class="el" href="bufrdeco_8h_source.html#l00299">BUFRDECO_OUTPUT_JSON_SUBSET_DATA</a>, <a class="el" href="bufrdeco__compressed_8c_source.html#l00040">bufrdeco_parse_compressed()</a>, <a class="el" href="bufrdeco_8h_source.html#l00812">bufr_sec3::compressed</a>, <a class="el" href="bufrdeco_8h_source.html#l00983">bufrdeco::error</a>, <a class="el" href="bufrdeco_8h_source.html#l00966">bufrdeco::mask</a>, <a class="el" href="bufrdeco_8h_source.html#l00670">bufrdeco_compressed_data_references::nd</a>, <a class="el" href="bufrdeco_8h_source.html#l00686">bufrdeco_subset_bit_offsets::nr</a>, <a class="el" href="bufrdeco_8h_source.html#l00977">bufrdeco::offsets</a>, <a class="el" href="bufrdeco_8h_source.html#l00687">bufrdeco_subset_bit_offsets::ofs</a>, <a class="el" href="bufrdeco_8h_source.html#l00978">bufrdeco::refs</a>, <a class="el" href="bufrdeco_8h_source.html#l00971">bufrdeco::sec3</a>, <a class="el" href="bufrdeco_8h_source.html#l00976">bufrdeco::state</a>, <a class="el" href="bufrdeco_8h_source.html#l00525">bufrdeco_decoding_data_state::subset</a>, and <a class="el" href="bufrdeco_8h_source.html#l00810">bufr_sec3::subsets</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2bufrdeco__json_8c_source.html#l00188">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_cgraph.png" border="0" usemap="#abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_cgraph" alt=""/></div>
<map name="abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_cgraph" id="abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_cgraph">
<area shape="rect" title="Prepare the struct bufrdeco to get data from the solicited subset." alt="" coords="5,506,168,546"/>
<area shape="rect" href="bufrdeco__data_8c.html#ae2d3eb10e84c09bd0d282f510bf720ee" title="User interface to decode a BUFR subset." alt="" coords="407,449,560,489"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#ab5056984d71413ec42f7bb6971de2ce8" title="Preliminary parse of a compressed data bufr." alt="" coords="608,575,797,600"/>
<area shape="rect" href="bufrdeco__data_8c.html#a0e0289d12b117e4df8f37f14486d3d71" title="Parse and get a struct bufrdeco_subset_sequence_data." alt="" coords="216,506,359,546"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#ad2f986d73d85c08ffa6560d80c244b33" title="Get data for a given subset in a compressed data bufr." alt="" coords="1105,339,1244,379"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a10e2f4d22e6412620ff7a5c673521f24" title="Clean all allocated bitmaps, but still is in memory." alt="" coords="621,397,784,423"/>
<area shape="rect" href="bufrdeco__memory_8c.html#ac39a1653e65fddaa1c96134f8e5cc995" title="Cleans a struct bufrdeco_subset_sequence_data." alt="" coords="625,447,781,487"/>
<area shape="rect" href="bufrdeco__data_8c.html#ad6b9dc48304e90c83c458100dc5cc58c" title="decode the data from a subset in a recursive way" alt="" coords="857,505,1023,545"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#a5589ee116b873030ba3134506dc87041" title="Get atom data from a descriptor for a given subset." alt="" coords="1325,881,1511,921"/>
<area shape="rect" href="bufrdeco__data_8c.html#a62790f7e23547e63cfb6946e8b8971e0" title="doubles the allocated space for a struct bufrdeco_subset_sequence_data whenever is posible" alt="" coords="1579,389,1739,429"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a93f2b82967a4808d0216d131e80ceaeb" title="Print an json object with a descriptor data." alt="" coords="1591,269,1726,309"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a57bb1f3074afcb7153f383f6aa6a72e4" title="print an operator desciptor as a json object" alt="" coords="1327,563,1509,603"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a92c10e5456545cc655bb7404cf47813b" title="print an operator desciptor as a json object" alt="" coords="1324,499,1512,539"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a158aa5bd5d71d3370fe6b9148bef7981" title="Print the comma &#39;,&#39; separator in an output." alt="" coords="1591,702,1726,742"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a4af4f83d73860998dfbfca384b54e04f" title=" " alt="" coords="1328,75,1508,115"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a84687ea45e442883c36d82e1f6f1e7fd" title="Print the header of a sequence descriptor (f == 3)" alt="" coords="1343,140,1493,195"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#aad2df858b5c8ee7f077ca9fce737cbca" title=" " alt="" coords="1341,371,1495,411"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#a02045267d87c33aa02af4fde381b8f23" title=" " alt="" coords="1340,435,1496,475"/>
<area shape="rect" href="bufrdeco__tableC_8c.html#a4d3457bb516d1c1e673218f20bdb9824" title=" " alt="" coords="1591,881,1726,921"/>
<area shape="rect" href="bufrdeco__tableC_8c.html#a2813b0332ec9389ddc3bc566bd358bf9" title=" " alt="" coords="1591,817,1726,857"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a01acf8b7be269860c9a3228fa96bc4f8" title=" " alt="" coords="1580,945,1737,971"/>
<area shape="rect" href="bufrdeco__utils_8c.html#aab7f54057263b695a8c4bfffd0747a5a" title=" " alt="" coords="1587,1044,1730,1069"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a22d23c4377cba5193d77a3b38c0f8d79" title="check if a descriptor is a local descriptor" alt="" coords="1587,995,1731,1020"/>
<area shape="rect" href="bufrdeco__tableC_8c.html#ab438fb71e02d28c02c165af401f1a1f2" title=" " alt="" coords="1798,817,1943,857"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a21db34de4334426d1c212ffdabee02cb" title="parse an integer with a descriptor fom bufr ECWMF libary" alt="" coords="1993,824,2144,849"/>
<area shape="rect" href="bufrdeco__utils_8c.html#ad26137576e21dbf0cd5b3cadfed38b5b" title="Read bits from an array of uint8_t and set them as an uint32_t." alt="" coords="1796,1044,1945,1069"/>
<area shape="rect" href="bufrdeco__utils_8c.html#ae2667eaa0605459867e88af6219e9592" title="Supress trailing blanks of a string." alt="" coords="1808,276,1933,301"/>
<area shape="rect" href="bufrdeco_2bufrdeco__json_8c.html#ad9c7b4faf6722aca949e3ff9d2ed1e70" title="prints a descriptor string value scaping the &#39;&quot;&#39; for a json format" alt="" coords="1801,326,1941,366"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a4659b01cee4a157aae8bf1b4e540b155" title="gets a string with formatted value depending of scale" alt="" coords="1801,211,1940,251"/>
<area shape="rect" href="bufrdeco__f2_8c.html#aeeb87adbf48f29af58a448c7354d5075" title=" " alt="" coords="1569,563,1748,603"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a119c6d89e7edbbe328149d2e0f91b0c3" title="Init a struct bufrdeco_subset_sequence_data." alt="" coords="869,417,1011,457"/>
<area shape="rect" href="bufrdeco__data_8c.html#adb361f81dc8e8fb9d52a9d0c02c38119" title="Decodes a replicated sequence." alt="" coords="1083,658,1267,698"/>
<area shape="rect" href="bufrdeco__f2_8c.html#a3169d30f8c32460fa68a2117129e4e44" title="parse a descritor with f = 2" alt="" coords="1321,780,1515,805"/>
<area shape="rect" href="bufrdeco__tableB_8c.html#acd32f541a08903094950979f6a0bc8d0" title="Get data from a table B descriptor." alt="" coords="1349,945,1487,971"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a2ea0ec1223259f004c824006340b4f10" title="Push a bitmap element in a bufrdeco_bitmap." alt="" coords="1336,995,1500,1020"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a38f7dd296da40c3cc2ac80071f936f37" title="allocate bitmap" alt="" coords="1573,767,1744,792"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a1d2fc8f6683d9697a36ca71eb513ef34" title="Get an int32_t from bits according with bufr criteria to change the reference of a descritor...." alt="" coords="1583,1094,1734,1134"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a683946b7b763416ffa9ab8849a608aaa" title="Init a struct bufrdeco_compressed_data_references." alt="" coords="853,569,1027,609"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#ac2034de9ae4ad0228a56c207689553b1" title="Parse recursively the compressed data in a bufr report to get references where to get data for every ..." alt="" coords="845,1035,1035,1075"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#a12eb30c4bdf4d68d2839d15dacbcf647" title="decodes a repicated subsequence" alt="" coords="1083,1035,1267,1075"/>
<area shape="rect" href="bufrdeco__compressed_8c.html#ac8828eb4ae2ec405691fe7b178526bfb" title="Increment the count of a struct bufrdeco_compressed_data_references." alt="" coords="1315,1143,1521,1183"/>
<area shape="rect" href="bufrdeco__f2_8c.html#a995fbc664903f38e5ddb916067aec107" title="parse a descritor with f = 2 in case of compressed bufr" alt="" coords="1315,1044,1521,1069"/>
<area shape="rect" href="bufrdeco__tableB_8c.html#a9f11c5ec977e9bfcb5d1820756f88fd7" title="get data from table B when parsing compressed data references" alt="" coords="1321,1093,1515,1119"/>
<area shape="rect" href="bufrdeco__utils_8c.html#ac1a6900782df9782c8e1b5d1b373db13" title="check if a descriptor is a delayed descriptor" alt="" coords="1578,1159,1739,1184"/>
<area shape="rect" href="bufrdeco__utils_8c.html#aecab28a7bcc79da2d78872c77ec3e5fc" title="check if a descriptor is a short delayed descriptor" alt="" coords="1591,1209,1726,1249"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_icgraph.png" border="0" usemap="#abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_icgraph" alt=""/></div>
<map name="abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_icgraph" id="abufrdeco_8c_aead4ed5a0bc1b6ce477095653107e548_icgraph">
<area shape="rect" title="Prepare the struct bufrdeco to get data from the solicited subset." alt="" coords="104,5,267,45"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,38"/>
</map>
</div>

</div>
</div>
<a id="a9f664c4df64e0966dad368811523196e" name="a9f664c4df64e0966dad368811523196e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f664c4df64e0966dad368811523196e">&#9670;&#160;</a></span>bufrdeco_get_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * bufrdeco_get_version </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>build</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dbuild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dbuilder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>version_major</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>version_minor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>version_patch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00050">50</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>  <span class="keywordtype">int</span> major = 0, minor = 0, patch = 0;</div>
<div class="line"><span class="lineno">   54</span>  <span class="keywordtype">size_t</span> used;</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>  <span class="comment">// Check argument</span></div>
<div class="line"><span class="lineno">   57</span>  <span class="keywordflow">if</span> ( version == NULL )</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  snprintf ( version, dversion, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_define" href="build_2config_8h.html#a1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a> );</div>
<div class="line"><span class="lineno">   61</span>  <span class="comment">// default</span></div>
<div class="line"><span class="lineno">   62</span>  sscanf ( version, <span class="stringliteral">&quot;%d.%d.%d&quot;</span>, &amp;major, &amp;minor, &amp;patch );</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>  <span class="keywordflow">if</span> ( build )</div>
<div class="line"><span class="lineno">   65</span>    {</div>
<div class="line"><span class="lineno">   66</span>      used = 0;</div>
<div class="line"><span class="lineno">   67</span><span class="preprocessor">#if defined(__INTEL_COMPILER)</span></div>
<div class="line"><span class="lineno">   68</span>      used += snprintf ( build + used, dbuild - used, <span class="stringliteral">&quot;using INTEL C compiler icc %d.%d &quot;</span>, __INTEL_COMPILER, __INTEL_COMPILER_UPDATE );</div>
<div class="line"><span class="lineno">   69</span><span class="preprocessor">#elif defined(__clang_version__)</span></div>
<div class="line"><span class="lineno">   70</span>      used += snprintf ( build + used, dbuild - used, <span class="stringliteral">&quot;using clang C compiler &quot;</span>, __clang_version__ );</div>
<div class="line"><span class="lineno">   71</span><span class="preprocessor">#elif defined(__GNUC__)</span></div>
<div class="line"><span class="lineno">   72</span>      used += snprintf ( build + used, dbuild - used, <span class="stringliteral">&quot;using GNU C compiler gcc %d.%d.%d &quot;</span>, __GNUC__, __GNUC_MINOR__, __GNUC_PATCHLEVEL__ );</div>
<div class="line"><span class="lineno">   73</span><span class="preprocessor">#elif defined(_MSC_VER)</span></div>
<div class="line"><span class="lineno">   74</span>      used += snprintf ( build + used, dbuild - used, <span class="stringliteral">&quot;using MICROSOFT C compiler %d &quot;</span>, _MSC_VER );</div>
<div class="line"><span class="lineno">   75</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   76</span>      used += snprintf ( build + used, dbuild - used, <span class="stringliteral">&quot;using an unknown C compiler &quot;</span> );</div>
<div class="line"><span class="lineno">   77</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   78</span>      snprintf ( build + used, dbuild - used,<span class="stringliteral">&quot;at %s %s&quot;</span>,__DATE__,__TIME__ );</div>
<div class="line"><span class="lineno">   79</span>    }</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">if</span> ( builder )</div>
<div class="line"><span class="lineno">   82</span><span class="preprocessor">#ifdef BUILD_USING_CMAKE</span></div>
<div class="line"><span class="lineno">   83</span>    <a class="code hl_define" href="bufrdeco_8h.html#a1dfa79363b49b1e663dc37920ecb89b3">strncpy_safe</a> ( builder, <span class="stringliteral">&quot;cmake&quot;</span>, dbuilder );</div>
<div class="line"><span class="lineno">   84</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   85</span>    <a class="code hl_define" href="bufrdeco_8h.html#a1dfa79363b49b1e663dc37920ecb89b3">strncpy_safe</a> ( builder, <span class="stringliteral">&quot;autotools&quot;</span>, dbuilder );</div>
<div class="line"><span class="lineno">   86</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span> ( version_major )</div>
<div class="line"><span class="lineno">   88</span>    *version_major = major;</div>
<div class="line"><span class="lineno">   89</span>  <span class="keywordflow">if</span> ( version_minor )</div>
<div class="line"><span class="lineno">   90</span>    *version_minor = minor;</div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordflow">if</span> ( version_patch )</div>
<div class="line"><span class="lineno">   92</span>    *version_patch = patch;</div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">return</span> version;</div>
<div class="line"><span class="lineno">   94</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a1dfa79363b49b1e663dc37920ecb89b3"><div class="ttname"><a href="bufrdeco_8h.html#a1dfa79363b49b1e663dc37920ecb89b3">strncpy_safe</a></div><div class="ttdeci">#define strncpy_safe(_target_, _src_, _dim_)</div><div class="ttdoc">Macro to make safely a strcpy when we know in calling function the size of string target directly.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00366">bufrdeco.h:366</a></div></div>
<div class="ttc" id="abuild_2config_8h_html_a1c6d5de492ac61ad29aec7aa9a436bbf"><div class="ttname"><a href="build_2config_8h.html#a1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a></div><div class="ttdeci">#define VERSION</div><div class="ttdef"><b>Definition:</b> <a href="build_2config_8h_source.html#l00008">config.h:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00366">strncpy_safe</a>, and <a class="el" href="build_2config_8h_source.html#l00008">VERSION</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac__io_8c_source.html#l00124">bufrtotac_print_version()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a9f664c4df64e0966dad368811523196e_icgraph.png" border="0" usemap="#abufrdeco_8c_a9f664c4df64e0966dad368811523196e_icgraph" alt=""/></div>
<map name="abufrdeco_8c_a9f664c4df64e0966dad368811523196e_icgraph" id="abufrdeco_8c_a9f664c4df64e0966dad368811523196e_icgraph">
<area shape="rect" title=" " alt="" coords="689,31,835,56"/>
<area shape="rect" href="bufrtotac__io_8c.html#a195af2ca7b18bbf0dde441a23d83b9d2" title=" " alt="" coords="487,31,641,56"/>
<area shape="rect" href="bufrtotac__io_8c.html#a544e9d97203a86ac63b1b0db1d13eee8" title=" " alt="" coords="291,5,439,31"/>
<area shape="rect" href="bufrtotac__io_8c.html#ac5e285608a727c09214b1e0c1ab179de" title=" " alt="" coords="104,31,243,56"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,56"/>
</map>
</div>

</div>
</div>
<a id="af9cff1700125f2b6df2e7da8d628c8d5" name="af9cff1700125f2b6df2e7da8d628c8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9cff1700125f2b6df2e7da8d628c8d5">&#9670;&#160;</a></span>bufrdeco_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inits and allocate memory for a struct <a class="el" href="structbufrdeco.html">bufrdeco</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to the target struct</td></tr>
  </table>
  </dd>
</dl>
<p>This function only must be called once. When finished the function <a class="el" href="bufrdeco_8c.html#a8fe6bc0c46327ed8db54b7a471f31504">bufrdeco_close</a> must be called to free all needed memory</p>
<dl class="section return"><dt>Returns</dt><dd>If succeeded return 0, otherwise 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00138">138</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  139</span>{</div>
<div class="line"><span class="lineno">  140</span>  <a class="code hl_define" href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a> ( b != NULL );</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  <span class="comment">// First clear all</span></div>
<div class="line"><span class="lineno">  143</span>  memset ( b, 0, <span class="keyword">sizeof</span> ( <span class="keyword">struct</span> <a class="code hl_struct" href="structbufrdeco.html">bufrdeco</a> ) );</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>  <span class="comment">// Then allocate all needed memory when starting. Further we will need to allocate some more depending on</span></div>
<div class="line"><span class="lineno">  146</span>  <span class="comment">// data</span></div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>  <span class="comment">// allocate memory for Tables</span></div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#a0576a87972353fb9e7a569fa1f905e03">bufrdeco_init_tables</a> ( &amp;b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">tables</a> ) )</div>
<div class="line"><span class="lineno">  150</span>    {</div>
<div class="line"><span class="lineno">  151</span>      snprintf ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a>, sizeof ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a> ),<span class="stringliteral">&quot;%s(): Cannot allocate space for tables\n&quot;</span>, __func__ );</div>
<div class="line"><span class="lineno">  152</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  153</span>    }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">// Output default streams</span></div>
<div class="line"><span class="lineno">  156</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">out</a> = stdout;</div>
<div class="line"><span class="lineno">  157</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a38dd4a6191aa1eeb5ce4dbf1b1c96ed6">err</a> = stderr;</div>
<div class="line"><span class="lineno">  158</span>    </div>
<div class="line"><span class="lineno">  159</span>  <span class="comment">// allocate memory for expanded tree of descriptors</span></div>
<div class="line"><span class="lineno">  160</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#a1d746042472e89d5c6092582919d1b98">bufrdeco_init_expanded_tree</a> ( &amp;b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ad7fa6f29977ceceff224c214a23aa839">tree</a> ) )</div>
<div class="line"><span class="lineno">  161</span>    {</div>
<div class="line"><span class="lineno">  162</span>      snprintf ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a>, sizeof ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a> ),<span class="stringliteral">&quot;%s(): Cannot allocate space for expanded tree of descriptors\n&quot;</span>, __func__ );</div>
<div class="line"><span class="lineno">  163</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  168</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a0576a87972353fb9e7a569fa1f905e03"><div class="ttname"><a href="bufrdeco_8h.html#a0576a87972353fb9e7a569fa1f905e03">bufrdeco_init_tables</a></div><div class="ttdeci">int bufrdeco_init_tables(struct bufr_tables **t)</div><div class="ttdoc">Init a struct bufr_tables allocating space.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00032">bufrdeco_memory.c:32</a></div></div>
<div class="ttc" id="abufrdeco_8h_html_a1d746042472e89d5c6092582919d1b98"><div class="ttname"><a href="bufrdeco_8h.html#a1d746042472e89d5c6092582919d1b98">bufrdeco_init_expanded_tree</a></div><div class="ttdeci">int bufrdeco_init_expanded_tree(struct bufrdeco_expanded_tree **t)</div><div class="ttdoc">Init a struct bufrdeco_expanded_tree allocating space.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__memory_8c_source.html#l00070">bufrdeco_memory.c:70</a></div></div>
<div class="ttc" id="astructbufrdeco_html"><div class="ttname"><a href="structbufrdeco.html">bufrdeco</a></div><div class="ttdoc">This struct contains all needed data to parse and decode a BUFR file.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00964">bufrdeco.h:965</a></div></div>
<div class="ttc" id="astructbufrdeco_html_a38dd4a6191aa1eeb5ce4dbf1b1c96ed6"><div class="ttname"><a href="structbufrdeco.html#a38dd4a6191aa1eeb5ce4dbf1b1c96ed6">bufrdeco::err</a></div><div class="ttdeci">FILE * err</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00985">bufrdeco.h:985</a></div></div>
<div class="ttc" id="astructbufrdeco_html_ac93aabeeb10c0f35e62a23b75590235f"><div class="ttname"><a href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">bufrdeco::out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00984">bufrdeco.h:984</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00374">bufrdeco_assert</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00070">bufrdeco_init_expanded_tree()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00032">bufrdeco_init_tables()</a>, <a class="el" href="bufrdeco_8h_source.html#l00985">bufrdeco::err</a>, <a class="el" href="bufrdeco_8h_source.html#l00983">bufrdeco::error</a>, <a class="el" href="bufrdeco_8h_source.html#l00984">bufrdeco::out</a>, <a class="el" href="bufrdeco_8h_source.html#l00973">bufrdeco::tables</a>, and <a class="el" href="bufrdeco_8h_source.html#l00975">bufrdeco::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2bufrdeco__json_8c_source.html#l00188">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_cgraph.png" border="0" usemap="#abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_cgraph" alt=""/></div>
<map name="abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_cgraph" id="abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_cgraph">
<area shape="rect" title="Inits and allocate memory for a struct bufrdeco." alt="" coords="5,31,101,56"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a1d746042472e89d5c6092582919d1b98" title="Init a struct bufrdeco_expanded_tree allocating space." alt="" coords="149,5,337,31"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a0576a87972353fb9e7a569fa1f905e03" title="Init a struct bufr_tables allocating space." alt="" coords="174,55,313,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_icgraph.png" border="0" usemap="#abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_icgraph" alt=""/></div>
<map name="abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_icgraph" id="abufrdeco_8c_af9cff1700125f2b6df2e7da8d628c8d5_icgraph">
<area shape="rect" title="Inits and allocate memory for a struct bufrdeco." alt="" coords="104,5,200,31"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,31"/>
</map>
</div>

</div>
</div>
<a id="adc93880205e1dfb437cd0a438e2ad469" name="adc93880205e1dfb437cd0a438e2ad469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc93880205e1dfb437cd0a438e2ad469">&#9670;&#160;</a></span>bufrdeco_parse_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_parse_tree </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the tree of descriptors without expand the replicators. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>Pointer to the source struct <a class="el" href="structbufrdeco.html">bufrdeco</a></td></tr>
  </table>
  </dd>
</dl>
<p>This is the user function to parse the descriptor structure of a BUFR report. This is the first task we need to perform after read the bufr report with the aid of <a class="el" href="bufrdeco_8h.html#ae3cfc6802c196511223adc0a6324e4af">bufrdeco_read_bufr</a> function.</p>
<p >At the end we will get an array of structs <a class="el" href="structbufr__sequence.html">bufr_sequence</a> defining the tree</p>
<p >A sequence layer is needed when parsing expanded descriptor sec3 and sec4</p>
<p >First <a class="el" href="structbufr__sequence.html" title="Stores an unexpanded sequence of descriptors.">bufr_sequence</a> is the sequence of descriptors in sec3 after byte 8. This is a <a class="el" href="structbufr__sequence.html" title="Stores an unexpanded sequence of descriptors.">bufr_sequence</a> in level 0.</p>
<p >When a sequence descriptor is found in a layer, the sequence entries found in table D form this descriptor is a son <a class="el" href="structbufr__sequence.html" title="Stores an unexpanded sequence of descriptors.">bufr_sequence</a>. This son has then a father and also can have one or more sons. The index level is incremented by one every step it go into decendents.</p>
<p >And so we go in a recursive way up to the end.</p>
<dl class="section return"><dt>Returns</dt><dd>If success return 0, if something went wrong return 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00120">120</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>{</div>
<div class="line"><span class="lineno">  122</span>  <a class="code hl_define" href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a> ( b != NULL );</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="comment">// here we start the parse</span></div>
<div class="line"><span class="lineno">  125</span>  <span class="keywordflow">return</span>  <a class="code hl_function" href="bufrdeco_8h.html#a83133afb16c01bc2c5c8649df1892b79">bufrdeco_parse_tree_recursive</a> ( b, NULL, 0, NULL );</div>
<div class="line"><span class="lineno">  126</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a83133afb16c01bc2c5c8649df1892b79"><div class="ttname"><a href="bufrdeco_8h.html#a83133afb16c01bc2c5c8649df1892b79">bufrdeco_parse_tree_recursive</a></div><div class="ttdeci">int bufrdeco_parse_tree_recursive(struct bufrdeco *b, struct bufr_sequence *father, buf_t father_idesc, const char *key)</div><div class="ttdoc">Parse the descriptor tree in a recursive way.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__tree_8c_source.html#l00060">bufrdeco_tree.c:60</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00374">bufrdeco_assert</a>, and <a class="el" href="bufrdeco__tree_8c_source.html#l00060">bufrdeco_parse_tree_recursive()</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2bufrdeco__json_8c_source.html#l00188">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_cgraph.png" border="0" usemap="#abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_cgraph" alt=""/></div>
<map name="abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_cgraph" id="abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_cgraph">
<area shape="rect" title="Parse the tree of descriptors without expand the replicators." alt="" coords="5,61,145,87"/>
<area shape="rect" href="bufrdeco__tree_8c.html#a83133afb16c01bc2c5c8649df1892b79" title="Parse the descriptor tree in a recursive way." alt="" coords="193,54,333,94"/>
<area shape="rect" href="bufrdeco__tableD_8c.html#af2e31aa084634a953baf8e1db501dc36" title="get the descriptors array for a descriptor sequence defined in table D with F = 3" alt="" coords="401,22,543,62"/>
<area shape="rect" href="bufrdeco__tree_8c.html#a9cc733eec2370436c295066c77a7ca80" title="Set to a struct bufr_sequence an unexpanded descriptor array from sec3 in a BUFR report." alt="" coords="381,86,563,126"/>
<area shape="rect" href="bufrdeco__tableD_8c.html#a1b808ce81391491f01bcf2b37be2d6c4" title=" " alt="" coords="611,5,765,31"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a21db34de4334426d1c212ffdabee02cb" title="parse an integer with a descriptor fom bufr ECWMF libary" alt="" coords="613,55,763,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_icgraph.png" border="0" usemap="#abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_icgraph" alt=""/></div>
<map name="abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_icgraph" id="abufrdeco_8c_adc93880205e1dfb437cd0a438e2ad469_icgraph">
<area shape="rect" title="Parse the tree of descriptors without expand the replicators." alt="" coords="104,5,244,31"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,31"/>
</map>
</div>

</div>
</div>
<a id="ae0d3f64970b29cece5689f91dec844b2" name="ae0d3f64970b29cece5689f91dec844b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d3f64970b29cece5689f91dec844b2">&#9670;&#160;</a></span>bufrdeco_read_subset_offset_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_read_subset_offset_bits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write offset bit array for subsets in a non-compressed bufr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>complete path of input file to open </td></tr>
    <tr><td class="paramname">b</td><td>pointer to the struct <a class="el" href="structbufrdeco.html">bufrdeco</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if problem, 0 otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00358">358</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  359</span>{</div>
<div class="line"><span class="lineno">  360</span>  <span class="keyword">struct </span>stat st;</div>
<div class="line"><span class="lineno">  361</span>  FILE *f;</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>  <span class="comment">// assert nice args</span></div>
<div class="line"><span class="lineno">  364</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( b != NULL || filename == NULL, 1 );</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>  <span class="comment">// silently return if cannot stat the file</span></div>
<div class="line"><span class="lineno">  367</span>  <span class="keywordflow">if</span> ( stat ( filename, &amp;st ) &lt; 0 )</div>
<div class="line"><span class="lineno">  368</span>    {</div>
<div class="line"><span class="lineno">  369</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  370</span>    }</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>  <span class="comment">// open the file</span></div>
<div class="line"><span class="lineno">  373</span>  f = fopen ( filename, <span class="stringliteral">&quot;r&quot;</span> );</div>
<div class="line"><span class="lineno">  374</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( f != NULL, 1 );</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>  <span class="comment">// Read the offsets</span></div>
<div class="line"><span class="lineno">  377</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#a63d8e18cea1084c68943122cb4aedc7d">bufr_read_subset_offset_bits</a> ( f, &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a9b3eff19e02659f516800b6abe0e718c">offsets</a> ) ) )</div>
<div class="line"><span class="lineno">  378</span>    {</div>
<div class="line"><span class="lineno">  379</span>      fclose ( f );</div>
<div class="line"><span class="lineno">  380</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  381</span>    }</div>
<div class="line"><span class="lineno">  382</span>  fclose ( f );</div>
<div class="line"><span class="lineno">  383</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  384</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a63d8e18cea1084c68943122cb4aedc7d"><div class="ttname"><a href="bufrdeco_8h.html#a63d8e18cea1084c68943122cb4aedc7d">bufr_read_subset_offset_bits</a></div><div class="ttdeci">int bufr_read_subset_offset_bits(FILE *f, struct bufrdeco_subset_bit_offsets *off)</div><div class="ttdoc">Write offset bit array for subsets in a non-compressed bufr.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__utils_8c_source.html#l00577">bufrdeco_utils.c:577</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco__utils_8c_source.html#l00577">bufr_read_subset_offset_bits()</a>, <a class="el" href="bufrdeco_8h_source.html#l00385">bufrdeco_assert_with_return_val</a>, and <a class="el" href="bufrdeco_8h_source.html#l00977">bufrdeco::offsets</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac_8c_source.html#l00134">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_cgraph.png" border="0" usemap="#abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_cgraph" alt=""/></div>
<map name="abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_cgraph" id="abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_cgraph">
<area shape="rect" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="5,5,156,45"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a63d8e18cea1084c68943122cb4aedc7d" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="204,13,395,38"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_icgraph.png" border="0" usemap="#abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_icgraph" alt=""/></div>
<map name="abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_icgraph" id="abufrdeco_8c_ae0d3f64970b29cece5689f91dec844b2_icgraph">
<area shape="rect" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="104,5,255,45"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,38"/>
</map>
</div>

</div>
</div>
<a id="a3267bcf923b41d0dde9d4d8c8c5058d1" name="a3267bcf923b41d0dde9d4d8c8c5058d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3267bcf923b41d0dde9d4d8c8c5058d1">&#9670;&#160;</a></span>bufrdeco_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset an struct <a class="el" href="structbufrdeco.html">bufrdeco</a>. This is needed when changing to another bufr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to the target struct to be resed with another bufrfile</td></tr>
  </table>
  </dd>
</dl>
<p>This function must be called when parsing another BUFR report without calling <a class="el" href="bufrdeco_8c.html#a8fe6bc0c46327ed8db54b7a471f31504">bufrdeco_close</a> and <a class="el" href="bufrdeco_8c.html#af9cff1700125f2b6df2e7da8d628c8d5">bufrdeco_init</a>. It</p>
<dl class="section return"><dt>Returns</dt><dd>If succeeded return 0, otherwise 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00180">180</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  181</span>{</div>
<div class="line"><span class="lineno">  182</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structbufr__tables.html">bufr_tables</a> *tb;</div>
<div class="line"><span class="lineno">  183</span>  <span class="keyword">struct </span><a class="code hl_struct" href="structbufr__tables__cache.html">bufr_tables_cache</a> ch;</div>
<div class="line"><span class="lineno">  184</span>  FILE *out,*err;</div>
<div class="line"><span class="lineno">  185</span>  uint32_t mask;</div>
<div class="line"><span class="lineno">  186</span>  <a class="code hl_define" href="bufrdeco_8h.html#a142902ec0ad75f8ae60946f7e3065f42">bufrdeco_assert</a> ( b != NULL );</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>  <span class="comment">// save the data we do not reset</span></div>
<div class="line"><span class="lineno">  189</span>  memcpy(&amp;ch, &amp;b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a7b905518741b6fb16e8387c66e42a60e">cache</a>, sizeof (<span class="keyword">struct</span> <a class="code hl_struct" href="structbufr__tables__cache.html">bufr_tables_cache</a>));</div>
<div class="line"><span class="lineno">  190</span>  tb = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">tables</a>;</div>
<div class="line"><span class="lineno">  191</span>  mask = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a>;</div>
<div class="line"><span class="lineno">  192</span>  out = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">out</a>;</div>
<div class="line"><span class="lineno">  193</span>  err = b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a38dd4a6191aa1eeb5ce4dbf1b1c96ed6">err</a>;</div>
<div class="line"><span class="lineno">  194</span>  <a class="code hl_function" href="bufrdeco_8h.html#a14e60e0905769f56485daf274c486d81">bufrdeco_free_subset_sequence_data</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a1fc826906a1abe2cab6272f16e60feb6">seq</a> ) );</div>
<div class="line"><span class="lineno">  195</span>  <a class="code hl_function" href="bufrdeco_8h.html#ada70fb2f449cb542b987acee73b8d494">bufrdeco_free_compressed_data_references</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a8321adc42a6d83888d2e0833c871c687">refs</a> ) );</div>
<div class="line"><span class="lineno">  196</span>  <a class="code hl_function" href="bufrdeco_8h.html#aae49b482b2986da2bc5971ee16e33048">bufrdeco_free_expanded_tree</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ad7fa6f29977ceceff224c214a23aa839">tree</a> ) );</div>
<div class="line"><span class="lineno">  197</span>  <a class="code hl_function" href="bufrdeco_8h.html#a5b5f882b643f32686ecae247e71974ac">bufrdeco_free_bitmap_array</a> ( &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a16e9ef0d0725017a0fec29bc70f7081f">bitmap</a> ) );</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>  memset ( b, 0, <span class="keyword">sizeof</span> ( <span class="keyword">struct</span> <a class="code hl_struct" href="structbufrdeco.html">bufrdeco</a> ) );</div>
<div class="line"><span class="lineno">  200</span>  </div>
<div class="line"><span class="lineno">  201</span>  <span class="comment">// Restore data</span></div>
<div class="line"><span class="lineno">  202</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">out</a> = out;</div>
<div class="line"><span class="lineno">  203</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a38dd4a6191aa1eeb5ce4dbf1b1c96ed6">err</a> = err;</div>
<div class="line"><span class="lineno">  204</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a22b38bbd630adc6a582ad2861c1f7787">mask</a> = mask;</div>
<div class="line"><span class="lineno">  205</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab14126b70642ce84fde7d0fbe37662da">tables</a> = tb;</div>
<div class="line"><span class="lineno">  206</span>  memcpy(&amp;b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a7b905518741b6fb16e8387c66e42a60e">cache</a>, &amp;ch, sizeof (<span class="keyword">struct</span> <a class="code hl_struct" href="structbufr__tables__cache.html">bufr_tables_cache</a>));</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>  <span class="comment">// allocate memory for expanded tree of descriptors</span></div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#a1d746042472e89d5c6092582919d1b98">bufrdeco_init_expanded_tree</a> ( &amp;b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ad7fa6f29977ceceff224c214a23aa839">tree</a> ) )</div>
<div class="line"><span class="lineno">  210</span>    {</div>
<div class="line"><span class="lineno">  211</span>      snprintf ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a>, sizeof ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ae34e327b324693e4e50477945c1e22aa">error</a> ),<span class="stringliteral">&quot;%s(): Cannot allocate space for expanded tree of descriptors\n&quot;</span>, __func__ );</div>
<div class="line"><span class="lineno">  212</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  213</span>    }</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  216</span>}</div>
<div class="ttc" id="astructbufr__tables__cache_html"><div class="ttname"><a href="structbufr__tables__cache.html">bufr_tables_cache</a></div><div class="ttdoc">Struct to store the cache of structs bufr_tables.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00950">bufrdeco.h:951</a></div></div>
<div class="ttc" id="astructbufr__tables_html"><div class="ttname"><a href="structbufr__tables.html">bufr_tables</a></div><div class="ttdoc">Contains all tables needed to parse a bufr file.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00937">bufrdeco.h:938</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00980">bufrdeco::bitmap</a>, <a class="el" href="bufrdeco_8h_source.html#l00374">bufrdeco_assert</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00331">bufrdeco_free_bitmap_array()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00250">bufrdeco_free_compressed_data_references()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00089">bufrdeco_free_expanded_tree()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00183">bufrdeco_free_subset_sequence_data()</a>, <a class="el" href="bufrdeco__memory_8c_source.html#l00070">bufrdeco_init_expanded_tree()</a>, <a class="el" href="bufrdeco_8h_source.html#l00974">bufrdeco::cache</a>, <a class="el" href="bufrdeco_8h_source.html#l00985">bufrdeco::err</a>, <a class="el" href="bufrdeco_8h_source.html#l00983">bufrdeco::error</a>, <a class="el" href="bufrdeco_8h_source.html#l00966">bufrdeco::mask</a>, <a class="el" href="bufrdeco_8h_source.html#l00984">bufrdeco::out</a>, <a class="el" href="bufrdeco_8h_source.html#l00978">bufrdeco::refs</a>, <a class="el" href="bufrdeco_8h_source.html#l00979">bufrdeco::seq</a>, <a class="el" href="bufrdeco_8h_source.html#l00973">bufrdeco::tables</a>, and <a class="el" href="bufrdeco_8h_source.html#l00975">bufrdeco::tree</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac_8c_source.html#l00134">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_cgraph.png" border="0" usemap="#abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_cgraph" alt=""/></div>
<map name="abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_cgraph" id="abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_cgraph">
<area shape="rect" title="Reset an struct bufrdeco. This is needed when changing to another bufr." alt="" coords="5,134,113,159"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a5b5f882b643f32686ecae247e71974ac" title="Free an allocated bitmap array." alt="" coords="185,5,331,45"/>
<area shape="rect" href="bufrdeco__memory_8c.html#ada70fb2f449cb542b987acee73b8d494" title="Free the memory allocated for array of references in a struct bufrdeco_compressed_data_references." alt="" coords="169,69,347,109"/>
<area shape="rect" href="bufrdeco__memory_8c.html#aae49b482b2986da2bc5971ee16e33048" title="Frees the allocated space for a struct bufrdeco_expanded_tree." alt="" coords="161,134,355,159"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a14e60e0905769f56485daf274c486d81" title="Free the memory for sequence array in a struct bufrdeco_subset_sequence_data." alt="" coords="185,184,331,224"/>
<area shape="rect" href="bufrdeco__memory_8c.html#a1d746042472e89d5c6092582919d1b98" title="Init a struct bufrdeco_expanded_tree allocating space." alt="" coords="164,249,352,274"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_icgraph.png" border="0" usemap="#abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_icgraph" alt=""/></div>
<map name="abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_icgraph" id="abufrdeco_8c_a3267bcf923b41d0dde9d4d8c8c5058d1_icgraph">
<area shape="rect" title="Reset an struct bufrdeco. This is needed when changing to another bufr." alt="" coords="104,5,212,31"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,31"/>
</map>
</div>

</div>
</div>
<a id="a9684a698515a222e863c6cb68162b628" name="a9684a698515a222e863c6cb68162b628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9684a698515a222e863c6cb68162b628">&#9670;&#160;</a></span>bufrdeco_set_err_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_set_err_stream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the error stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">err</td><td>stream opened by caller </td></tr>
    <tr><td class="paramname">b</td><td>pointer to current active struct <a class="el" href="structbufrdeco.html">bufrdeco</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If succeeded return 0, otherwise 1</dd></dl>
<p>Without calling to this funcion, the default is stderr </p>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00242">242</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  243</span>{</div>
<div class="line"><span class="lineno">  244</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">out</a> = err;</div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  246</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00984">bufrdeco::out</a>.</p>

</div>
</div>
<a id="a5196b5f0848f6738b6362eceb074f6b5" name="a5196b5f0848f6738b6362eceb074f6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5196b5f0848f6738b6362eceb074f6b5">&#9670;&#160;</a></span>bufrdeco_set_out_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_set_out_stream </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the library normal output stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>stream opened by caller </td></tr>
    <tr><td class="paramname">b</td><td>pointer to current active struct <a class="el" href="structbufrdeco.html">bufrdeco</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If succeeded return 0, otherwise 1</dd></dl>
<p>Without calling to this funcion, the default is stdout </p>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00227">227</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  228</span>{</div>
<div class="line"><span class="lineno">  229</span>  b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ac93aabeeb10c0f35e62a23b75590235f">out</a> = out;</div>
<div class="line"><span class="lineno">  230</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  231</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00984">bufrdeco::out</a>.</p>

</div>
</div>
<a id="a7618eeff4a75408eb25e086999de2883" name="a7618eeff4a75408eb25e086999de2883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7618eeff4a75408eb25e086999de2883">&#9670;&#160;</a></span>bufrdeco_set_tables_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_set_tables_dir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tables_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the directory path for BUFR tables. Needed if it is not any default directories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>pointer to the target struct </td></tr>
    <tr><td class="paramname">tables_dir</td><td>Source path of tables directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if problem, 0 otherwise</dd></dl>
<p>The default directories are '/usr/share/bufr2synop' and '/usr/local/share/bufr2synop' </p>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00291">291</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>{</div>
<div class="line"><span class="lineno">  293</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( b != NULL || tables_dir == NULL, 1 );</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>  <a class="code hl_define" href="bufrdeco_8h.html#a1dfa79363b49b1e663dc37920ecb89b3">strncpy_safe</a> ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#ab2c6f6f7063e6c1d6ef416ad3af75c02">bufrtables_dir</a>, tables_dir, <a class="code hl_define" href="bufrdeco_8h.html#a8d0527d51ed9aa220996a6761fd1311c">BUFRDECO_PATH_LENGTH</a> );</div>
<div class="line"><span class="lineno">  296</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  297</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a8d0527d51ed9aa220996a6761fd1311c"><div class="ttname"><a href="bufrdeco_8h.html#a8d0527d51ed9aa220996a6761fd1311c">BUFRDECO_PATH_LENGTH</a></div><div class="ttdeci">#define BUFRDECO_PATH_LENGTH</div><div class="ttdoc">Length for files/directory path strings.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00335">bufrdeco.h:335</a></div></div>
<div class="ttc" id="astructbufrdeco_html_ab2c6f6f7063e6c1d6ef416ad3af75c02"><div class="ttname"><a href="structbufrdeco.html#ab2c6f6f7063e6c1d6ef416ad3af75c02">bufrdeco::bufrtables_dir</a></div><div class="ttdeci">char bufrtables_dir[BUFRDECO_PATH_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00982">bufrdeco.h:982</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00385">bufrdeco_assert_with_return_val</a>, <a class="el" href="bufrdeco_8h_source.html#l00335">BUFRDECO_PATH_LENGTH</a>, <a class="el" href="bufrdeco_8h_source.html#l00982">bufrdeco::bufrtables_dir</a>, and <a class="el" href="bufrdeco_8h_source.html#l00366">strncpy_safe</a>.</p>

</div>
</div>
<a id="adc165203de787081aa568ee171d145ff" name="adc165203de787081aa568ee171d145ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc165203de787081aa568ee171d145ff">&#9670;&#160;</a></span>bufrdeco_write_subset_offset_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bufrdeco_write_subset_offset_bits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufrdeco.html">bufrdeco</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write offset bit array for subsets in a non-compressed bufr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>complete path of output file to open </td></tr>
    <tr><td class="paramname">b</td><td>pointer to the struct <a class="el" href="structbufrdeco.html">bufrdeco</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if problem, 0 otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="bufrdeco_8c_source.html#l00330">330</a> of file <a class="el" href="bufrdeco_8c_source.html">bufrdeco.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  331</span>{</div>
<div class="line"><span class="lineno">  332</span>  FILE *f;</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>  <span class="comment">// assert nice args</span></div>
<div class="line"><span class="lineno">  335</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( b != NULL || filename == NULL, 1 );</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>  <span class="comment">// open the file</span></div>
<div class="line"><span class="lineno">  338</span>  f = fopen ( filename, <span class="stringliteral">&quot;w&quot;</span> );</div>
<div class="line"><span class="lineno">  339</span>  <a class="code hl_define" href="bufrdeco_8h.html#a7867baabc50a595b9d3e4853b76011ad">bufrdeco_assert_with_return_val</a> ( f != NULL, 1 );</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>  <span class="comment">// Read the offsets</span></div>
<div class="line"><span class="lineno">  342</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrdeco_8h.html#a35d0fefdb311500b8269ed4250a7534c">bufr_write_subset_offset_bits</a> ( f, &amp; ( b-&gt;<a class="code hl_variable" href="structbufrdeco.html#a9b3eff19e02659f516800b6abe0e718c">offsets</a> ) ) )</div>
<div class="line"><span class="lineno">  343</span>    {</div>
<div class="line"><span class="lineno">  344</span>      fclose ( f );</div>
<div class="line"><span class="lineno">  345</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  346</span>    }</div>
<div class="line"><span class="lineno">  347</span>  fclose ( f );</div>
<div class="line"><span class="lineno">  348</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  349</span>}</div>
<div class="ttc" id="abufrdeco_8h_html_a35d0fefdb311500b8269ed4250a7534c"><div class="ttname"><a href="bufrdeco_8h.html#a35d0fefdb311500b8269ed4250a7534c">bufr_write_subset_offset_bits</a></div><div class="ttdeci">int bufr_write_subset_offset_bits(FILE *f, struct bufrdeco_subset_bit_offsets *off)</div><div class="ttdoc">Write offset bit array for subsets in a non-compressed bufr.</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco__utils_8c_source.html#l00555">bufrdeco_utils.c:555</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco__utils_8c_source.html#l00555">bufr_write_subset_offset_bits()</a>, <a class="el" href="bufrdeco_8h_source.html#l00385">bufrdeco_assert_with_return_val</a>, and <a class="el" href="bufrdeco_8h_source.html#l00977">bufrdeco::offsets</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac_8c_source.html#l00134">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_adc165203de787081aa568ee171d145ff_cgraph.png" border="0" usemap="#abufrdeco_8c_adc165203de787081aa568ee171d145ff_cgraph" alt=""/></div>
<map name="abufrdeco_8c_adc165203de787081aa568ee171d145ff_cgraph" id="abufrdeco_8c_adc165203de787081aa568ee171d145ff_cgraph">
<area shape="rect" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="5,5,159,45"/>
<area shape="rect" href="bufrdeco__utils_8c.html#a35d0fefdb311500b8269ed4250a7534c" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="207,13,400,38"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrdeco_8c_adc165203de787081aa568ee171d145ff_icgraph.png" border="0" usemap="#abufrdeco_8c_adc165203de787081aa568ee171d145ff_icgraph" alt=""/></div>
<map name="abufrdeco_8c_adc165203de787081aa568ee171d145ff_icgraph" id="abufrdeco_8c_adc165203de787081aa568ee171d145ff_icgraph">
<area shape="rect" title="Write offset bit array for subsets in a non&#45;compressed bufr." alt="" coords="104,5,257,45"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,38"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
