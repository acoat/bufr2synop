<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bufr2synop: src/apps/bufrnoaa.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bufr2synop<span id="projectnumber">&#160;0.24.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_53adf0b982dc8545998aae3f283a5a58.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">bufrnoaa.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file includes the code to extract BUFR messages from NOAA bin files.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bufrnoaa_8h_source.html">bufrnoaa.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bufrnoaa.c:</div>
<div class="dyncontent">
<div class="center"><img src="bufrnoaa_8c__incl.png" border="0" usemap="#asrc_2apps_2bufrnoaa_8c" alt=""/></div>
<map name="asrc_2apps_2bufrnoaa_8c" id="asrc_2apps_2bufrnoaa_8c">
<area shape="rect" title="This file includes the code to extract BUFR messages from NOAA bin files." alt="" coords="279,5,417,31"/>
<area shape="rect" href="bufrnoaa_8h.html" title="inclusion file for binary bufrnoaa" alt="" coords="307,79,389,104"/>
<area shape="rect" title=" " alt="" coords="5,152,67,177"/>
<area shape="rect" title=" " alt="" coords="91,152,155,177"/>
<area shape="rect" title=" " alt="" coords="179,152,245,177"/>
<area shape="rect" title=" " alt="" coords="269,152,339,177"/>
<area shape="rect" title=" " alt="" coords="363,152,421,177"/>
<area shape="rect" title=" " alt="" coords="446,152,511,177"/>
<area shape="rect" title=" " alt="" coords="536,152,619,177"/>
<area shape="rect" title=" " alt="" coords="643,152,723,177"/>
</map>
</div>
</div>
<p><a href="bufrnoaa_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab4e6044af1cc815d38d577334434776e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a></td></tr>
<tr class="separator:ab4e6044af1cc815d38d577334434776e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a4e2998b023fe32c30fada0b831e764"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a2a4e2998b023fe32c30fada0b831e764">SELECT</a></td></tr>
<tr class="separator:a2a4e2998b023fe32c30fada0b831e764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edf8135c1c105a800a879a39bd3f76f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a6edf8135c1c105a800a879a39bd3f76f">INDIVIDUAL</a></td></tr>
<tr class="separator:a6edf8135c1c105a800a879a39bd3f76f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01c7d663961643e69a55874f21d1f6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#af01c7d663961643e69a55874f21d1f6c">COLECT</a></td></tr>
<tr class="separator:af01c7d663961643e69a55874f21d1f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab848ce91ba14d3dc5c87d0b42f3a1c0d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#ab848ce91ba14d3dc5c87d0b42f3a1c0d">VERBOSE</a></td></tr>
<tr class="separator:ab848ce91ba14d3dc5c87d0b42f3a1c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab743531042b48bca45e8b573f6b5bd3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#ab743531042b48bca45e8b573f6b5bd3a">LISTF</a></td></tr>
<tr class="separator:ab743531042b48bca45e8b573f6b5bd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81749302f18af2ffeb29939caa669b1f"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a> [<a class="el" href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a>]</td></tr>
<tr class="separator:a81749302f18af2ffeb29939caa669b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa147e2eadc7cb9c67a055bce4da4c76b"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#aa147e2eadc7cb9c67a055bce4da4c76b">BUF</a> [<a class="el" href="bufrnoaa_8h.html#ad5ad5a82d7269ccd82836f885b61e5cb">BLEN</a>]</td></tr>
<tr class="separator:aa147e2eadc7cb9c67a055bce4da4c76b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bdced3f176172405d17dd959e94e2cc"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a> [256]</td></tr>
<tr class="separator:a2bdced3f176172405d17dd959e94e2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa044ceba749fb50960f392fa0551ed24"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#aa044ceba749fb50960f392fa0551ed24">SEL</a> [64]</td></tr>
<tr class="separator:aa044ceba749fb50960f392fa0551ed24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf03fc95baf8034fd7e699529cee3b84"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#aaf03fc95baf8034fd7e699529cee3b84">SELS</a> [64]</td></tr>
<tr class="separator:aaf03fc95baf8034fd7e699529cee3b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423f8e138795e25649388f1fd4e676fd"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a423f8e138795e25649388f1fd4e676fd">SELU</a> [64]</td></tr>
<tr class="separator:a423f8e138795e25649388f1fd4e676fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcbb9bcb919fa9ed38d90205b37a2b9f"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#abcbb9bcb919fa9ed38d90205b37a2b9f">SELO</a> [64]</td></tr>
<tr class="separator:abcbb9bcb919fa9ed38d90205b37a2b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa556cb93487ced397bd454a79b602ed7"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#aa556cb93487ced397bd454a79b602ed7">PREFIX</a> [64]</td></tr>
<tr class="separator:aa556cb93487ced397bd454a79b602ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33fb3384ee0ac684b14e05950634b1fc"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a></td></tr>
<tr class="separator:a33fb3384ee0ac684b14e05950634b1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a24f9e2ef4e69d9b218a9f21004b62"><td class="memItemLeft" align="right" valign="top">struct stat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a></td></tr>
<tr class="separator:a22a24f9e2ef4e69d9b218a9f21004b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f57234737f8b5788971ddfa67c6199"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a> [] = &quot;bufrnoaa&quot;</td></tr>
<tr class="separator:a91f57234737f8b5788971ddfa67c6199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c738ddb1292ea903bdf2e23196c4a47"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a0c738ddb1292ea903bdf2e23196c4a47">SEP</a> [] = &quot;\r\r\n&quot;</td></tr>
<tr class="separator:a0c738ddb1292ea903bdf2e23196c4a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4777ce2af73257dc9f038fece5102c47"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufrnoaa_8c.html#a4777ce2af73257dc9f038fece5102c47">FINAL_SEP</a> [4]</td></tr>
<tr class="separator:a4777ce2af73257dc9f038fece5102c47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file includes the code to extract BUFR messages from NOAA bin files. </p>
<pre>
*.bin files have the following sequence
header: in the form '****NNNNNNN****
new line
Name: This is taken as name
\r\r<br  />
bufr report
\r\r<br  />

First, it parses bufr reports from file with path included with argument -i

Then for every report several decisions are taken depending on arguments
  1) Select or discard depending on the type of BUFR
     To select we have to set our choice with the aid of argument -T.
     The argument supplied with '-t' will have one or more chars matching with T2 indexes (see below).
     As example, '-T USO' will select all the BUFR messages with T2 as U (upper level), S (surface) or
     O (oceanographic)
     If no '-t' argument is set it means NO SELECCTION i.e. we almost do nothing

  2) For every selected BUFR message we can do any of these task, (they are not excluyent)<ul>
<li>To write individual files, one per bufr message, with names as 'YYYYMMDDHHmmss_ISIE06_SBBR_012100_RRB.bufr'.
       Date and time are source file timestamp and other items from bufr header.
       To do this we have to use '-f' option.</li>
<li>To write an archive file as the original NOAA bin file, but just with selected messages. The option
       is '-F prefix' where prefix is the string to add. Resulting file names are in the form prefix_original_nane
       if no -F option then no archive bin file is generated. timestamp of resulting file is the same than the input
       file. In case of no bufr selected it just create a void file.

Second item of resulting name file is 6 characters long:

For observed data T1 is 'I'

Possible values for T2 when T1 = 'I'
   O     Oceanographic/limnographic (water properties)
   P     Pictorial
   S     Surface/sea level
   T     Text (plain language information)
   U     Upper air
   X     Other data types
   Z     Mixed data types

When T1T2 = 'IS' values for A1:

   IS A 01–29 Routinely scheduled observations for n/a 000/006
              distribution from automatic (fixed or mobile)
              land stations (e.g. 0000, 0100, … or 0220, 0240,
              0300, …, or 0715, 0745, ... UTC)
   IS A 30–59 N-minute observations from automatic (fixed n/a 000/007
              or mobile) land stations
   IS B   Radar reports (parts A and B) RADOB 006/003
   IS C 01–45 Climatic observations from land stations CLIMAT 000/020
   IS C 46–59 Climatic observations from marine stations CLIMAT SHIP 001/0202009 edition
              ATTACHmENT II-5 I
   IS D   Radiological observation RADREP 010/001
   IS E   Ozone measurement at surface n/a 008/000
   IS F   Source of atmospherics SFAZI, SFLOC, SFAZU 000/030
   IS I 01–45 Intermediate synoptic observations from fixed SYNOP (SIxx) 000/001
          land stations 000/051
   IS I 46–59 Intermediate synoptic observations from mobile SYNOP mOBIL 000/004
          land stations
   IS M 01–45 Main synoptic observations from fixed land SYNOP (SMxx) 000/002
          stations 000/052
   IS M 46–59 Main synoptic observations from mobile land SYNOP mOBIL 000/005
           stations
   IS N 01–45 Synoptic observations from fixed land stations SYNOP (SNxx) 000/000
          at non-standard time (i.e. 0100, 0200, 0400,   000/050
          0500, ... UTC)
   IS N 46–59 Synoptic observations from mobile land stations SYNOP mOBIL 000/003
          at non-standard time (i.e. 0100, 0200, 0400,
          0500, ... UTC)
   IS R   Hydrologic reports HYDRA 000/040
   IS S 01–19 Synoptic observations from marine stations SHIP 001/000
   IS S 20–39 One-hour observations from automatic marine n/a 001/006
         stations
   IS S 40–59 N-minute observations from automatic marine n/a 001/007
         stations
   IS T 01–19 Tide gauge observations n/a 001/030
   IS T 20–39 Observed water level time series n/a 001/031
   IS V   Special aeronautical observations (SPECI) SPECI 000/011
   IS W   Aviation routine weather observations (mETAR) mETAR 000/010
   IS X   Other surface data IAC, IAC FLEET

When T1T2 = 'IU'  valores for A1:
   IU A   Single level aircraft reports (automatic) AmDAR 004/000
   IU A   Single level aircraft reports (manual) AIREP/PIREP 004/001
   IU B   Single level balloon reports n/a
   IU C   (used for single level satellite-derived SAREP/SATOB 005/000
           reports – see Note 3)
   IU D   Dropsonde/Dropwindsondes TEmP DROP 002/007
   IU E   Ozone vertical sounding n/a 008/001
   IU I   Dispersal and transport analysis n/a 009/000
   IU J 01–19 Upper wind from fixed land stations (entire PILOT (parts A, 002/001
          sounding) B, C, D)
   IU J 20–39 Upper wind from mobile land stations (entire PILOT mOBIL 002/003
          sounding) (parts A, B, C, D)
   IU J 40–59 Upper wind from marine stations (entire PILOT SHIP 002/002
         sounding) (parts A, B, C, D)
   IU K 01–19 Radio soundings from fixed land stations TEmP (parts A, B) 002/004
         (up to 100 hPa)
   IU K 20–39 Radio soundings from mobile land stations TEmP mOBIL 002/006
        (up to 100 hPa) (parts A, B)
   IU K 40–59 Radio soundings from marine stations TEmP SHIP (parts A, B) 002/005
         (up to 100 hPa)
   IU M   Model derived sondes
   IU N   Rocketsondes
   IU O   Profiles of aircraft observations in ascending/ AmDAR 002/020
          descending
   IU P   Profilers PILOT 002/010
   IU Q   RASS temperature profilers TEmP 002/011
   IU R   (used for radiance data – see Note 3)
   IU S   01–19 Radiosondes/pibal reports from fixed land TEmP (parts A, B, C, D) 002/004
           stations (entire sounding)
   IU S 20–39 Radio soundings from mobile land stations TEmP mOBIL (parts A, 002/006
           (entire sounding) B, C, D)
   IU S 40–59 Radio soundings from marine stations TEmP SHIP (parts A, 002/005
           (entire sounding) B, C, D)
   IU T   (used for satellite-derived sondes – see Note 3) SATEm, SARAD, SATOB
   IU U 01–45 Monthly statistics of data from upper-air stations CLImAT TEmP 002/025
   IU U 46–59 Monthly statistics of data from marine stations CLImAT TEmP, SHIP 002/026
   IU W 01–19 Upper wind from fixed land stations (up to PILOT (parts A, B) 002/001
           100 hPa)
   IU W 20–39 Upper wind from mobile land stations (up to PILOT mOBIL 002/003
           100 hPa) (parts A, B)
   IU W 40–59 Upper wind from marine stations (up to PILOT SHIP 002/002
           100 hPa) (parts A, B)
   IU X   Other upper-air reports

for T1T2 = 'IO' values for A1:
   IO B   Buoy observations BUOY 001/025
   IO I   Sea ice
   IO P   Sub-surface profiling floats TESAC 031/004
   IO R   Sea surface observations TRACKOB 031/001
   IO S   Sea surface and below soundings BATHY, TESAC 031/005
   IO T   Sea surface temperature
   IO W   Sea surface waves WAVEOB 031/002
   IO X   Other sea environmental

About A2

   A     0 - 90W northern hemisphere
   B     90W - 180 northern hemisphere
   C     180 - 90E northern hemisphere
   D     90E - 0 northern hemisphere
   E     0 - 90W tropical belt
   F     90W - 180 tropical belt
   G     180 - 90E tropical belt
   H     90E - 0 tropical belt
   I     0 - 90W southern hemisphere
   J     90W - 180 southern hemisphere
   K     180 - 90E southern hemisphere
   L     90E - 0 southern hemisphere
   M     Lower left 10S 100E/upper right 70N 110W
   N     Northern hemisphere
   P     Area between 64.69N - 136.76W, 55.61N - 13.43W
   64.69N - 156.76W, 55.61N - 33.43W
   S     Southern hemisphere
   T     45W - 180 northern hemisphere
   U     Area between 21.0N - 128.1W, 36.0N - 130.9W
             21.1N - 113.0W, 36.2N - 110.5W
   V     Area between 30.3N - 83.7W, 51.0N - 68.9W
             19.8N - 64.5W, 33.3N - 47.1W
   X     Global Area (area not definable)




</li>
</ul>
</pre>
<p class="definition">Definition in file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00210">210</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  211</span>{</div>
<div class="line"><span class="lineno">  212</span>  <span class="keywordtype">size_t</span> nb = 0, nc, nx = 0, nbuf = 0, nsel = 0, nerr = 0, i, nh = 0, nw;</div>
<div class="line"><span class="lineno">  213</span>  FILE* ficin;</div>
<div class="line"><span class="lineno">  214</span>  FILE* ficout = NULL;</div>
<div class="line"><span class="lineno">  215</span>  FILE* ficol = NULL;</div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b[4], header[256];</div>
<div class="line"><span class="lineno">  217</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> expected = 0;</div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordtype">char</span> name[256], namex[256], namec[256];</div>
<div class="line"><span class="lineno">  219</span>  <span class="keywordtype">double</span> tx;</div>
<div class="line"><span class="lineno">  220</span>  <span class="keyword">struct </span>timeval tini, tfin, tt;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>  <span class="comment">// Initial time</span></div>
<div class="line"><span class="lineno">  223</span>  gettimeofday ( &amp;tini, NULL );</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>  <span class="comment">// read args from stdio</span></div>
<div class="line"><span class="lineno">  226</span>  <span class="keywordflow">if</span> ( <a class="code hl_function" href="apps_2bufrdeco__json_8c.html#a46f2cea859a89848802f2cdc5f70dcb3">read_args</a> ( argc, argv ) &lt; 0 )</div>
<div class="line"><span class="lineno">  227</span>    {</div>
<div class="line"><span class="lineno">  228</span>      exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  229</span>    }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>  <span class="comment">// Check input</span></div>
<div class="line"><span class="lineno">  232</span>  <span class="keywordflow">if</span> ( stat ( <a class="code hl_variable" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a>, &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a> ) )</div>
<div class="line"><span class="lineno">  233</span>    {</div>
<div class="line"><span class="lineno">  234</span>      printf ( <span class="stringliteral">&quot;%s: Cannot stat  %s\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, <a class="code hl_variable" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a> );</div>
<div class="line"><span class="lineno">  235</span>      exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  236</span>    }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>  <span class="comment">// Open output file</span></div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">if</span> ( ( ficin = fopen ( <a class="code hl_variable" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a>,<span class="stringliteral">&quot;r&quot;</span> ) ) == NULL )</div>
<div class="line"><span class="lineno">  240</span>    {</div>
<div class="line"><span class="lineno">  241</span>      printf ( <span class="stringliteral">&quot;%s: Cannot open %s\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, <a class="code hl_variable" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a> );</div>
<div class="line"><span class="lineno">  242</span>      exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#af01c7d663961643e69a55874f21d1f6c">COLECT</a> )</div>
<div class="line"><span class="lineno">  246</span>    {</div>
<div class="line"><span class="lineno">  247</span>      <span class="comment">// To make an archive</span></div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>      <span class="comment">// build a name</span></div>
<div class="line"><span class="lineno">  250</span>      strcpy ( namec, <a class="code hl_variable" href="bufrnoaa_8c.html#aa556cb93487ced397bd454a79b602ed7">PREFIX</a> );</div>
<div class="line"><span class="lineno">  251</span>      strcat ( namec, <a class="code hl_variable" href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a> );</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>      <span class="comment">// open the file</span></div>
<div class="line"><span class="lineno">  254</span>      <span class="keywordflow">if</span> ( ( ficol = fopen ( namec, <span class="stringliteral">&quot;w&quot;</span> ) ) == NULL )</div>
<div class="line"><span class="lineno">  255</span>        {</div>
<div class="line"><span class="lineno">  256</span>          printf ( <span class="stringliteral">&quot;%s: Cannot open %s\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, namec );</div>
<div class="line"><span class="lineno">  257</span>          exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  258</span>        }</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>  memset ( &amp;b, 0, 4 * <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ) );</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>  <span class="keywordflow">while</span> ( ( nc = fread ( &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#aa147e2eadc7cb9c67a055bce4da4c76b">BUF</a>[0], <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ), <a class="code hl_define" href="bufrnoaa_8h.html#ad5ad5a82d7269ccd82836f885b61e5cb">BLEN</a>, ficin ) ) &gt; 0 )</div>
<div class="line"><span class="lineno">  267</span>    {</div>
<div class="line"><span class="lineno">  268</span>      <span class="keywordflow">for</span> ( i = 0; i &lt; nc ; i++ )</div>
<div class="line"><span class="lineno">  269</span>        {</div>
<div class="line"><span class="lineno">  270</span>          <span class="comment">// ingest a byte</span></div>
<div class="line"><span class="lineno">  271</span>          b[3] = b[2];</div>
<div class="line"><span class="lineno">  272</span>          b[2] = b[1];</div>
<div class="line"><span class="lineno">  273</span>          b[1] = b[0];</div>
<div class="line"><span class="lineno">  274</span>          b[0] = <a class="code hl_variable" href="bufrnoaa_8c.html#aa147e2eadc7cb9c67a055bce4da4c76b">BUF</a>[i];</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>          <span class="keywordflow">switch</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> )</div>
<div class="line"><span class="lineno">  277</span>            {</div>
<div class="line"><span class="lineno">  278</span>            <span class="keywordflow">case</span> 0: <span class="comment">// begining, searching header init</span></div>
<div class="line"><span class="lineno">  279</span>              <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrnoaa_8h.html#a1d8da77155c138fa9ae6cdae021f636a">is_head_custom</a> ( &amp;b[0] , <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a> ) )</div>
<div class="line"><span class="lineno">  280</span>                {</div>
<div class="line"><span class="lineno">  281</span>                  memset ( &amp;header[0], 0, 64 * <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ) );</div>
<div class="line"><span class="lineno">  282</span>                  header[0] = <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a>;</div>
<div class="line"><span class="lineno">  283</span>                  header[1] = <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a>;</div>
<div class="line"><span class="lineno">  284</span>                  header[2] = <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a>;</div>
<div class="line"><span class="lineno">  285</span>                  header[3] = <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a>;</div>
<div class="line"><span class="lineno">  286</span>                  nh = 4;</div>
<div class="line"><span class="lineno">  287</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 1;</div>
<div class="line"><span class="lineno">  288</span>                }</div>
<div class="line"><span class="lineno">  289</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  290</span>            <span class="keywordflow">case</span> 1: <span class="comment">// header found, filling</span></div>
<div class="line"><span class="lineno">  291</span>              <span class="keywordflow">if</span> ( nh &lt; 255 )</div>
<div class="line"><span class="lineno">  292</span>                header[nh++] = b[0];</div>
<div class="line"><span class="lineno">  293</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  294</span>                {</div>
<div class="line"><span class="lineno">  295</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  296</span>                  nerr++;</div>
<div class="line"><span class="lineno">  297</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  298</span>                }</div>
<div class="line"><span class="lineno">  299</span>              <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrnoaa_8h.html#a1d8da77155c138fa9ae6cdae021f636a">is_head_custom</a> ( &amp;b[0] , <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a> ) )</div>
<div class="line"><span class="lineno">  300</span>                {</div>
<div class="line"><span class="lineno">  301</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 2;</div>
<div class="line"><span class="lineno">  302</span>                  <span class="comment">//header[nh++] = &#39;\0&#39;;</span></div>
<div class="line"><span class="lineno">  303</span>                  <span class="comment">//printf(&quot;Header: &#39;%s&#39;\n&quot;,header);</span></div>
<div class="line"><span class="lineno">  304</span>                }</div>
<div class="line"><span class="lineno">  305</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  306</span>            <span class="keywordflow">case</span> 2: <span class="comment">// header already finished</span></div>
<div class="line"><span class="lineno">  307</span>              <span class="keywordflow">if</span> ( nh &lt; 255 )</div>
<div class="line"><span class="lineno">  308</span>                header[nh++] = b[0];</div>
<div class="line"><span class="lineno">  309</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  310</span>                {</div>
<div class="line"><span class="lineno">  311</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  312</span>                  nerr++;</div>
<div class="line"><span class="lineno">  313</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  314</span>                }</div>
<div class="line"><span class="lineno">  315</span>              <span class="keywordflow">if</span> ( b[0] != 0x0a &amp;&amp; b[0] != 0x0d )</div>
<div class="line"><span class="lineno">  316</span>                {</div>
<div class="line"><span class="lineno">  317</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 3;</div>
<div class="line"><span class="lineno">  318</span>                  memset ( &amp;name[0], 0, 128 * <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ) );</div>
<div class="line"><span class="lineno">  319</span>                  name[0] = b[0];</div>
<div class="line"><span class="lineno">  320</span>                  nx = 1;</div>
<div class="line"><span class="lineno">  321</span>                }</div>
<div class="line"><span class="lineno">  322</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  323</span>            <span class="keywordflow">case</span> 3: <span class="comment">// name already inited</span></div>
<div class="line"><span class="lineno">  324</span>              <span class="keywordflow">if</span> ( nh &lt; 255 )</div>
<div class="line"><span class="lineno">  325</span>                header[nh++] = b[0];</div>
<div class="line"><span class="lineno">  326</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  327</span>                {</div>
<div class="line"><span class="lineno">  328</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  329</span>                  nerr++;</div>
<div class="line"><span class="lineno">  330</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  331</span>                }</div>
<div class="line"><span class="lineno">  332</span>              <span class="keywordflow">if</span> ( nx &gt;= 255 )</div>
<div class="line"><span class="lineno">  333</span>                {</div>
<div class="line"><span class="lineno">  334</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  335</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  336</span>                }</div>
<div class="line"><span class="lineno">  337</span>              <span class="keywordflow">if</span> ( b[0] == 0x01a || b[0] == 0x0d )</div>
<div class="line"><span class="lineno">  338</span>                {</div>
<div class="line"><span class="lineno">  339</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 4;</div>
<div class="line"><span class="lineno">  340</span>                  name[nx++] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  341</span>                  <span class="comment">//printf(&quot;Name: &#39;%s&#39;\n&quot;,name);</span></div>
<div class="line"><span class="lineno">  342</span>                }</div>
<div class="line"><span class="lineno">  343</span>              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( b[0] == <span class="charliteral">&#39; &#39;</span> )</div>
<div class="line"><span class="lineno">  344</span>                name[nx++] = <span class="charliteral">&#39;_&#39;</span>; <span class="comment">// substitute a space by &#39;_&#39;</span></div>
<div class="line"><span class="lineno">  345</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  346</span>                name[nx++] = b[0];</div>
<div class="line"><span class="lineno">  347</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  348</span>            <span class="keywordflow">case</span> 4: <span class="comment">// Waiting BUFR message begin</span></div>
<div class="line"><span class="lineno">  349</span>              <span class="keywordflow">if</span> ( nh &lt; 255 )</div>
<div class="line"><span class="lineno">  350</span>                header[nh++] = b[0];</div>
<div class="line"><span class="lineno">  351</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  352</span>                {</div>
<div class="line"><span class="lineno">  353</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  354</span>                  nerr++;</div>
<div class="line"><span class="lineno">  355</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  356</span>                }</div>
<div class="line"><span class="lineno">  357</span>              <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrnoaa_8h.html#aae53f0cf25746fc6582e734634d88536">is_bufr</a> ( &amp;b[0] ) )</div>
<div class="line"><span class="lineno">  358</span>                {</div>
<div class="line"><span class="lineno">  359</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 5;</div>
<div class="line"><span class="lineno">  360</span>                  expected = 0;</div>
<div class="line"><span class="lineno">  361</span>                  <span class="comment">// printf(&quot;Leyendo BUFR\n&quot;);</span></div>
<div class="line"><span class="lineno">  362</span>                  memset ( &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[0], 0, <a class="code hl_define" href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a> );</div>
<div class="line"><span class="lineno">  363</span>                  nb = 4;</div>
<div class="line"><span class="lineno">  364</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[0]=<span class="charliteral">&#39;B&#39;</span>;</div>
<div class="line"><span class="lineno">  365</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[1]=<span class="charliteral">&#39;U&#39;</span>;</div>
<div class="line"><span class="lineno">  366</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[2]=<span class="charliteral">&#39;F&#39;</span>;</div>
<div class="line"><span class="lineno">  367</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[3]=<span class="charliteral">&#39;R&#39;</span>;</div>
<div class="line"><span class="lineno">  368</span>                  nh -= 4;</div>
<div class="line"><span class="lineno">  369</span>                  header[nh] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  370</span>                }</div>
<div class="line"><span class="lineno">  371</span>              <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">case</span> 5: <span class="comment">// Filling BUFR message till final &#39;7777&#39;</span></div>
<div class="line"><span class="lineno">  373</span>              <span class="keywordflow">if</span> ( nb &lt; ( <a class="code hl_define" href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a> - 1 ) )</div>
<div class="line"><span class="lineno">  374</span>                <a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[nb++] = b[0];</div>
<div class="line"><span class="lineno">  375</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  376</span>                {</div>
<div class="line"><span class="lineno">  377</span>                  printf ( <span class="stringliteral">&quot;Error: Bufr message length &gt; %d&quot;</span>, <a class="code hl_define" href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a> );</div>
<div class="line"><span class="lineno">  378</span>                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  379</span>                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  380</span>                }</div>
<div class="line"><span class="lineno">  381</span>              <span class="comment">// check expected length</span></div>
<div class="line"><span class="lineno">  382</span>              <span class="keywordflow">if</span> ( nb == 7 )</div>
<div class="line"><span class="lineno">  383</span>                {</div>
<div class="line"><span class="lineno">  384</span>                  expected = ( <span class="keywordtype">unsigned</span> int ) b[0] + ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ) b[1] * 256 + ( <span class="keywordtype">unsigned</span> int ) b[2] * 65536;</div>
<div class="line"><span class="lineno">  385</span>                }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>              <span class="comment">// Has been detected some void and fakes bufr</span></div>
<div class="line"><span class="lineno">  388</span>              <span class="keywordflow">if</span> ( b[0] == <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  389</span>                   b[1] == <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  390</span>                   b[2] == <a class="code hl_variable" href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a></div>
<div class="line"><span class="lineno">  391</span>                 )</div>
<div class="line"><span class="lineno">  392</span>                {</div>
<div class="line"><span class="lineno">  393</span>                  <span class="comment">// Ooops. a fake bufr</span></div>
<div class="line"><span class="lineno">  394</span>                  <span class="comment">// it seems a new header has been found before &#39;7777&#39;</span></div>
<div class="line"><span class="lineno">  395</span>                  <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  396</span>                  nerr++;</div>
<div class="line"><span class="lineno">  397</span>                  <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  398</span>                }</div>
<div class="line"><span class="lineno">  399</span>              <span class="keywordflow">if</span> ( nb == expected )</div>
<div class="line"><span class="lineno">  400</span>                {</div>
<div class="line"><span class="lineno">  401</span>                  <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrnoaa_8h.html#a4d85db149640a3c0662be2f467fcff23">is_endb</a> ( &amp;b[0] ) )</div>
<div class="line"><span class="lineno">  402</span>                    {</div>
<div class="line"><span class="lineno">  403</span>                      <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  404</span>                      nbuf++;</div>
<div class="line"><span class="lineno">  405</span>                      <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#ab743531042b48bca45e8b573f6b5bd3a">LISTF</a> )</div>
<div class="line"><span class="lineno">  406</span>                        printf ( <span class="stringliteral">&quot;%s\n&quot;</span>, name );</div>
<div class="line"><span class="lineno">  407</span>                      <span class="keywordflow">if</span> ( <a class="code hl_function" href="bufrnoaa_8h.html#a036827f5c0ff2b9501403fead64d94e2">bufr_is_selected</a> ( name ) )</div>
<div class="line"><span class="lineno">  408</span>                        {</div>
<div class="line"><span class="lineno">  409</span>                          nsel++;</div>
<div class="line"><span class="lineno">  410</span>                          <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#a6edf8135c1c105a800a879a39bd3f76f">INDIVIDUAL</a> )</div>
<div class="line"><span class="lineno">  411</span>                            {</div>
<div class="line"><span class="lineno">  412</span>                              <span class="comment">// prefix with input file timestamp</span></div>
<div class="line"><span class="lineno">  413</span>                              <a class="code hl_function" href="bufrnoaa_8h.html#a8e32ee6fcb5a4a960e7210a4d7ce1419">date_mtime_from_stat</a> ( namex, &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a> );</div>
<div class="line"><span class="lineno">  414</span>                              strcat ( namex,<span class="stringliteral">&quot;_&quot;</span> );</div>
<div class="line"><span class="lineno">  415</span>                              strcat ( namex, name );</div>
<div class="line"><span class="lineno">  416</span>                              strcat ( namex, <span class="stringliteral">&quot;.bufr&quot;</span> );</div>
<div class="line"><span class="lineno">  417</span>                              <span class="keywordflow">if</span> ( ( ficout = fopen ( namex, <span class="stringliteral">&quot;w&quot;</span> ) ) == NULL )</div>
<div class="line"><span class="lineno">  418</span>                                {</div>
<div class="line"><span class="lineno">  419</span>                                  printf ( <span class="stringliteral">&quot;Error: cannot open %s\n&quot;</span>, name );</div>
<div class="line"><span class="lineno">  420</span>                                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  421</span>                                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  422</span>                                }</div>
<div class="line"><span class="lineno">  423</span>                              <span class="keywordflow">if</span> ( ( nw = fwrite ( &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[0], <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ), nb, ficout ) ) != nb )</div>
<div class="line"><span class="lineno">  424</span>                                {</div>
<div class="line"><span class="lineno">  425</span>                                  printf ( <span class="stringliteral">&quot;Error: Writen %lu bytes instead of %lu in %s file\n&quot;</span>, nw, nb, namex );</div>
<div class="line"><span class="lineno">  426</span>                                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  427</span>                                  fclose ( ficout );</div>
<div class="line"><span class="lineno">  428</span>                                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  429</span>                                }</div>
<div class="line"><span class="lineno">  430</span>                              <span class="comment">// close an individual fileq</span></div>
<div class="line"><span class="lineno">  431</span>                              fclose ( ficout );</div>
<div class="line"><span class="lineno">  432</span>                              <span class="comment">// change individual file timestamp</span></div>
<div class="line"><span class="lineno">  433</span>                              <a class="code hl_function" href="bufrnoaa_8h.html#a7852e7b80fac5075558e8a19192fc494">mtime_from_stat</a> ( namex, &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a> );</div>
<div class="line"><span class="lineno">  434</span>                            }</div>
<div class="line"><span class="lineno">  435</span>                          <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#af01c7d663961643e69a55874f21d1f6c">COLECT</a> )</div>
<div class="line"><span class="lineno">  436</span>                            {</div>
<div class="line"><span class="lineno">  437</span>                              <span class="comment">// first write header</span></div>
<div class="line"><span class="lineno">  438</span>                              <span class="keywordflow">if</span> ( ( nw = fwrite ( &amp;header[0], <span class="keyword">sizeof</span> ( <span class="keywordtype">char</span> ), nh, ficol ) ) != nh )</div>
<div class="line"><span class="lineno">  439</span>                                {</div>
<div class="line"><span class="lineno">  440</span>                                  printf ( <span class="stringliteral">&quot;%s: Error: Writen %lu bytes instead of %lu in %s file\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, nw, nh, namec );</div>
<div class="line"><span class="lineno">  441</span>                                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  442</span>                                  fclose ( ficol );</div>
<div class="line"><span class="lineno">  443</span>                                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  444</span>                                }</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>                              <span class="comment">// then bufr message</span></div>
<div class="line"><span class="lineno">  447</span>                              <span class="keywordflow">if</span> ( ( nw = fwrite ( &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a>[0], <span class="keyword">sizeof</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ), nb, ficol ) ) != nb )</div>
<div class="line"><span class="lineno">  448</span>                                {</div>
<div class="line"><span class="lineno">  449</span>                                  printf ( <span class="stringliteral">&quot;%s: Error: Writen %lu bytes instead of %lu in %s file\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, nw, nb, namex );</div>
<div class="line"><span class="lineno">  450</span>                                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  451</span>                                  fclose ( ficout );</div>
<div class="line"><span class="lineno">  452</span>                                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  453</span>                                }</div>
<div class="line"><span class="lineno">  454</span>                              <span class="comment">// finally \r\r\n</span></div>
<div class="line"><span class="lineno">  455</span>                              <span class="keywordflow">if</span> (<a class="code hl_variable" href="bufrnoaa_8c.html#a4777ce2af73257dc9f038fece5102c47">FINAL_SEP</a>[0])</div>
<div class="line"><span class="lineno">  456</span>                              {</div>
<div class="line"><span class="lineno">  457</span>                              <span class="keywordflow">if</span> ( ( nw = fwrite ( &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a4777ce2af73257dc9f038fece5102c47">FINAL_SEP</a>[0], <span class="keyword">sizeof</span> ( <span class="keywordtype">char</span> ), 3, ficol ) ) != 3 )</div>
<div class="line"><span class="lineno">  458</span>                                {</div>
<div class="line"><span class="lineno">  459</span>                                  printf ( <span class="stringliteral">&quot;%s: Error: Writen %lu bytes instead of 3 chars separing messages in %s\n&quot;</span>, <a class="code hl_variable" href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a>, nw, namex );</div>
<div class="line"><span class="lineno">  460</span>                                  fclose ( ficin );</div>
<div class="line"><span class="lineno">  461</span>                                  fclose ( ficout );</div>
<div class="line"><span class="lineno">  462</span>                                  exit ( EXIT_FAILURE );</div>
<div class="line"><span class="lineno">  463</span>                                }</div>
<div class="line"><span class="lineno">  464</span>                              }</div>
<div class="line"><span class="lineno">  465</span>                            }</div>
<div class="line"><span class="lineno">  466</span>                        }</div>
<div class="line"><span class="lineno">  467</span>                    }</div>
<div class="line"><span class="lineno">  468</span>                  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  469</span>                    {</div>
<div class="line"><span class="lineno">  470</span>                      <span class="comment">// reached the expected end of BUFR without a &#39;7777&#39;</span></div>
<div class="line"><span class="lineno">  471</span>                      <a class="code hl_variable" href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a> = 0;</div>
<div class="line"><span class="lineno">  472</span>                      nerr++;</div>
<div class="line"><span class="lineno">  473</span>                      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  474</span>                    }</div>
<div class="line"><span class="lineno">  475</span>                }</div>
<div class="line"><span class="lineno">  476</span>            }</div>
<div class="line"><span class="lineno">  477</span>        }</div>
<div class="line"><span class="lineno">  478</span>    }</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>  <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#af01c7d663961643e69a55874f21d1f6c">COLECT</a> )</div>
<div class="line"><span class="lineno">  481</span>    {</div>
<div class="line"><span class="lineno">  482</span>      fclose ( ficol );</div>
<div class="line"><span class="lineno">  483</span>      <span class="comment">// change archive file timestamp</span></div>
<div class="line"><span class="lineno">  484</span>      <a class="code hl_function" href="bufrnoaa_8h.html#a7852e7b80fac5075558e8a19192fc494">mtime_from_stat</a> ( namec, &amp;<a class="code hl_variable" href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a> );</div>
<div class="line"><span class="lineno">  485</span>    }</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>  <span class="comment">// Final time</span></div>
<div class="line"><span class="lineno">  488</span>  gettimeofday ( &amp;tfin, NULL );</div>
<div class="line"><span class="lineno">  489</span>  fclose ( ficin );</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>  <span class="comment">// A brief stat output</span></div>
<div class="line"><span class="lineno">  492</span>  <span class="keywordflow">if</span> ( <a class="code hl_variable" href="bufrnoaa_8c.html#ab848ce91ba14d3dc5c87d0b42f3a1c0d">VERBOSE</a> )</div>
<div class="line"><span class="lineno">  493</span>    {</div>
<div class="line"><span class="lineno">  494</span>      printf ( <span class="stringliteral">&quot;Found %lu bufr reports. Selected: %lu. Wrong: %lu\n&quot;</span>, nbuf, nsel, nerr );</div>
<div class="line"><span class="lineno">  495</span>      <a class="code hl_function" href="bufrnoaa_8h.html#afae47bf6471a7bbc98d4629471967ca5">timeval_substract</a> ( &amp;tt, &amp;tfin, &amp;tini );</div>
<div class="line"><span class="lineno">  496</span>      tx = ( double ) tt.tv_sec + ( <span class="keywordtype">double</span> ) tt.tv_usec *1e-6;</div>
<div class="line"><span class="lineno">  497</span>      printf ( <span class="stringliteral">&quot;%lf seg.  &quot;</span>, tx );</div>
<div class="line"><span class="lineno">  498</span>      <span class="keywordflow">if</span> ( nbuf &amp;&amp; tx != 0.0 )</div>
<div class="line"><span class="lineno">  499</span>        printf ( <span class="stringliteral">&quot;%lf reports/sec.\n&quot;</span>, ( <span class="keywordtype">double</span> ) nbuf / tx );</div>
<div class="line"><span class="lineno">  500</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  501</span>        printf ( <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line"><span class="lineno">  502</span>    }</div>
<div class="line"><span class="lineno">  503</span>  exit ( EXIT_SUCCESS );</div>
<div class="line"><span class="lineno">  504</span>}</div>
<div class="ttc" id="aapps_2bufrdeco__json_8c_html_a46f2cea859a89848802f2cdc5f70dcb3"><div class="ttname"><a href="apps_2bufrdeco__json_8c.html#a46f2cea859a89848802f2cdc5f70dcb3">read_args</a></div><div class="ttdeci">int read_args(int _argc, char *_argv[])</div><div class="ttdoc">read the arguments from stdio</div><div class="ttdef"><b>Definition:</b> <a href="apps_2bufrdeco__json_8c_source.html#l00063">bufrdeco_json.c:63</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a22a24f9e2ef4e69d9b218a9f21004b62"><div class="ttname"><a href="bufrnoaa_8c.html#a22a24f9e2ef4e69d9b218a9f21004b62">INSTAT</a></div><div class="ttdeci">struct stat INSTAT</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00204">bufrnoaa.c:204</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a2bdced3f176172405d17dd959e94e2cc"><div class="ttname"><a href="bufrnoaa_8c.html#a2bdced3f176172405d17dd959e94e2cc">ENTRADA</a></div><div class="ttdeci">char ENTRADA[256]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00196">bufrnoaa.c:196</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a33fb3384ee0ac684b14e05950634b1fc"><div class="ttname"><a href="bufrnoaa_8c.html#a33fb3384ee0ac684b14e05950634b1fc">HEADER_MARK</a></div><div class="ttdeci">char HEADER_MARK</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00202">bufrnoaa.c:202</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a4777ce2af73257dc9f038fece5102c47"><div class="ttname"><a href="bufrnoaa_8c.html#a4777ce2af73257dc9f038fece5102c47">FINAL_SEP</a></div><div class="ttdeci">char FINAL_SEP[4]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00207">bufrnoaa.c:207</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a6edf8135c1c105a800a879a39bd3f76f"><div class="ttname"><a href="bufrnoaa_8c.html#a6edf8135c1c105a800a879a39bd3f76f">INDIVIDUAL</a></div><div class="ttdeci">int INDIVIDUAL</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00192">bufrnoaa.c:192</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a81749302f18af2ffeb29939caa669b1f"><div class="ttname"><a href="bufrnoaa_8c.html#a81749302f18af2ffeb29939caa669b1f">BUFR</a></div><div class="ttdeci">unsigned char BUFR[BUFRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00194">bufrnoaa.c:194</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_a91f57234737f8b5788971ddfa67c6199"><div class="ttname"><a href="bufrnoaa_8c.html#a91f57234737f8b5788971ddfa67c6199">OWN</a></div><div class="ttdeci">char OWN[]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00205">bufrnoaa.c:205</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_aa147e2eadc7cb9c67a055bce4da4c76b"><div class="ttname"><a href="bufrnoaa_8c.html#aa147e2eadc7cb9c67a055bce4da4c76b">BUF</a></div><div class="ttdeci">unsigned char BUF[BLEN]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00195">bufrnoaa.c:195</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_aa556cb93487ced397bd454a79b602ed7"><div class="ttname"><a href="bufrnoaa_8c.html#aa556cb93487ced397bd454a79b602ed7">PREFIX</a></div><div class="ttdeci">char PREFIX[64]</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00201">bufrnoaa.c:201</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_ab4e6044af1cc815d38d577334434776e"><div class="ttname"><a href="bufrnoaa_8c.html#ab4e6044af1cc815d38d577334434776e">STAGE</a></div><div class="ttdeci">int STAGE</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00192">bufrnoaa.c:192</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_ab743531042b48bca45e8b573f6b5bd3a"><div class="ttname"><a href="bufrnoaa_8c.html#ab743531042b48bca45e8b573f6b5bd3a">LISTF</a></div><div class="ttdeci">int LISTF</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00193">bufrnoaa.c:193</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_ab848ce91ba14d3dc5c87d0b42f3a1c0d"><div class="ttname"><a href="bufrnoaa_8c.html#ab848ce91ba14d3dc5c87d0b42f3a1c0d">VERBOSE</a></div><div class="ttdeci">int VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00192">bufrnoaa.c:192</a></div></div>
<div class="ttc" id="abufrnoaa_8c_html_af01c7d663961643e69a55874f21d1f6c"><div class="ttname"><a href="bufrnoaa_8c.html#af01c7d663961643e69a55874f21d1f6c">COLECT</a></div><div class="ttdeci">int COLECT</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8c_source.html#l00192">bufrnoaa.c:192</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_a036827f5c0ff2b9501403fead64d94e2"><div class="ttname"><a href="bufrnoaa_8h.html#a036827f5c0ff2b9501403fead64d94e2">bufr_is_selected</a></div><div class="ttdeci">int bufr_is_selected(char *name)</div><div class="ttdoc">returns 1 if selected message 0 otherwise</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00124">bufrnoaa_utils.c:124</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_a1d8da77155c138fa9ae6cdae021f636a"><div class="ttname"><a href="bufrnoaa_8h.html#a1d8da77155c138fa9ae6cdae021f636a">is_head_custom</a></div><div class="ttdeci">int is_head_custom(unsigned char *b, char mark)</div><div class="ttdoc">checks if an unsigned char from an array is the first char of repeated mark char four times</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00061">bufrnoaa_utils.c:61</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_a4d85db149640a3c0662be2f467fcff23"><div class="ttname"><a href="bufrnoaa_8h.html#a4d85db149640a3c0662be2f467fcff23">is_endb</a></div><div class="ttdeci">int is_endb(unsigned char *b)</div><div class="ttdoc">checks if an unsigned char from an array is the first char of '7777'</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00076">bufrnoaa_utils.c:76</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_a7852e7b80fac5075558e8a19192fc494"><div class="ttname"><a href="bufrnoaa_8h.html#a7852e7b80fac5075558e8a19192fc494">mtime_from_stat</a></div><div class="ttdeci">int mtime_from_stat(char *filename, struct stat *st)</div><div class="ttdoc">modifies a file update time from a struct stat</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00178">bufrnoaa_utils.c:178</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_a8e32ee6fcb5a4a960e7210a4d7ce1419"><div class="ttname"><a href="bufrnoaa_8h.html#a8e32ee6fcb5a4a960e7210a4d7ce1419">date_mtime_from_stat</a></div><div class="ttdeci">int date_mtime_from_stat(char *date, struct stat *st)</div><div class="ttdoc">get a string with date and time from a struct stat</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00163">bufrnoaa_utils.c:163</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_aae53f0cf25746fc6582e734634d88536"><div class="ttname"><a href="bufrnoaa_8h.html#aae53f0cf25746fc6582e734634d88536">is_bufr</a></div><div class="ttdeci">int is_bufr(unsigned char *b)</div><div class="ttdoc">checks if an unsigned char from an array is the first char of 'BUFR'</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00033">bufrnoaa_utils.c:33</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_abafa8414b6cb873255f24d29e90e99eb"><div class="ttname"><a href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a></div><div class="ttdeci">#define BUFRLEN</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8h_source.html#l00036">bufrnoaa.h:36</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_ad5ad5a82d7269ccd82836f885b61e5cb"><div class="ttname"><a href="bufrnoaa_8h.html#ad5ad5a82d7269ccd82836f885b61e5cb">BLEN</a></div><div class="ttdeci">#define BLEN</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa_8h_source.html#l00034">bufrnoaa.h:34</a></div></div>
<div class="ttc" id="abufrnoaa_8h_html_afae47bf6471a7bbc98d4629471967ca5"><div class="ttname"><a href="bufrnoaa_8h.html#afae47bf6471a7bbc98d4629471967ca5">timeval_substract</a></div><div class="ttdeci">int timeval_substract(struct timeval *result, struct timeval *x, struct timeval *y)</div><div class="ttdoc">Subtract the ‘struct timeval’ values X and Y, storing the result in RESULT.</div><div class="ttdef"><b>Definition:</b> <a href="bufrnoaa__utils_8c_source.html#l00093">bufrnoaa_utils.c:93</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrnoaa_8h_source.html#l00034">BLEN</a>, <a class="el" href="bufrnoaa_8c_source.html#l00195">BUF</a>, <a class="el" href="bufrnoaa_8c_source.html#l00194">BUFR</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00124">bufr_is_selected()</a>, <a class="el" href="bufrnoaa_8h_source.html#l00036">BUFRLEN</a>, <a class="el" href="bufrnoaa_8c_source.html#l00192">COLECT</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00163">date_mtime_from_stat()</a>, <a class="el" href="bufrnoaa_8c_source.html#l00196">ENTRADA</a>, <a class="el" href="bufrnoaa_8c_source.html#l00207">FINAL_SEP</a>, <a class="el" href="bufrnoaa_8c_source.html#l00202">HEADER_MARK</a>, <a class="el" href="bufrnoaa_8c_source.html#l00192">INDIVIDUAL</a>, <a class="el" href="bufrnoaa_8c_source.html#l00204">INSTAT</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00033">is_bufr()</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00076">is_endb()</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00061">is_head_custom()</a>, <a class="el" href="bufrnoaa_8c_source.html#l00193">LISTF</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00178">mtime_from_stat()</a>, <a class="el" href="bufrnoaa_8c_source.html#l00205">OWN</a>, <a class="el" href="bufrnoaa_8c_source.html#l00201">PREFIX</a>, <a class="el" href="apps_2bufrdeco__json_8c_source.html#l00063">read_args()</a>, <a class="el" href="bufrnoaa_8c_source.html#l00192">STAGE</a>, <a class="el" href="bufrnoaa__utils_8c_source.html#l00093">timeval_substract()</a>, and <a class="el" href="bufrnoaa_8c_source.html#l00192">VERBOSE</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufrnoaa_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#abufrnoaa_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="abufrnoaa_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="abufrnoaa_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title=" " alt="" coords="5,179,56,204"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#a036827f5c0ff2b9501403fead64d94e2" title="returns 1 if selected message 0 otherwise" alt="" coords="121,5,239,31"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#aee54cab2f67e3406a3b75a406bfe9d43" title="get a string with date and time from a struct stat" alt="" coords="104,55,256,80"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#aae53f0cf25746fc6582e734634d88536" title="checks if an unsigned char from an array is the first char of &#39;BUFR&#39;" alt="" coords="149,104,211,129"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#a4d85db149640a3c0662be2f467fcff23" title="checks if an unsigned char from an array is the first char of &#39;7777&#39;" alt="" coords="147,153,213,179"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#a1d8da77155c138fa9ae6cdae021f636a" title="checks if an unsigned char from an array is the first char of repeated mark char four times" alt="" coords="121,203,239,228"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#a7852e7b80fac5075558e8a19192fc494" title="modifies a file update time from a struct stat" alt="" coords="120,252,240,277"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#a46f2cea859a89848802f2cdc5f70dcb3" title="read the arguments from stdio" alt="" coords="141,301,219,327"/>
<area shape="rect" href="bufrnoaa__utils_8c.html#afae47bf6471a7bbc98d4629471967ca5" title="Subtract the ‘struct timeval’ values X and Y, storing the result in RESULT." alt="" coords="118,351,242,376"/>
<area shape="rect" href="apps_2bufrdeco__json_8c.html#aa1187b70998f73cdb598833d6afaa30a" title=" " alt="" coords="304,301,393,327"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa147e2eadc7cb9c67a055bce4da4c76b" name="aa147e2eadc7cb9c67a055bce4da4c76b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa147e2eadc7cb9c67a055bce4da4c76b">&#9670;&#160;</a></span>BUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char BUF[<a class="el" href="bufrnoaa_8h.html#ad5ad5a82d7269ccd82836f885b61e5cb">BLEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00195">195</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>.</p>

</div>
</div>
<a id="a81749302f18af2ffeb29939caa669b1f" name="a81749302f18af2ffeb29939caa669b1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81749302f18af2ffeb29939caa669b1f">&#9670;&#160;</a></span>BUFR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char BUFR[<a class="el" href="bufrnoaa_8h.html#abafa8414b6cb873255f24d29e90e99eb">BUFRLEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00194">194</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>.</p>

</div>
</div>
<a id="af01c7d663961643e69a55874f21d1f6c" name="af01c7d663961643e69a55874f21d1f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01c7d663961643e69a55874f21d1f6c">&#9670;&#160;</a></span>COLECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int COLECT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00192">192</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a2bdced3f176172405d17dd959e94e2cc" name="a2bdced3f176172405d17dd959e94e2cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bdced3f176172405d17dd959e94e2cc">&#9670;&#160;</a></span>ENTRADA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char ENTRADA[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00196">196</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>.</p>

</div>
</div>
<a id="a4777ce2af73257dc9f038fece5102c47" name="a4777ce2af73257dc9f038fece5102c47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4777ce2af73257dc9f038fece5102c47">&#9670;&#160;</a></span>FINAL_SEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char FINAL_SEP[4]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00207">207</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a33fb3384ee0ac684b14e05950634b1fc" name="a33fb3384ee0ac684b14e05950634b1fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33fb3384ee0ac684b14e05950634b1fc">&#9670;&#160;</a></span>HEADER_MARK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HEADER_MARK</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Header mark character who is repeated four times at the begining </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00202">202</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a6edf8135c1c105a800a879a39bd3f76f" name="a6edf8135c1c105a800a879a39bd3f76f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6edf8135c1c105a800a879a39bd3f76f">&#9670;&#160;</a></span>INDIVIDUAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int INDIVIDUAL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00192">192</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a22a24f9e2ef4e69d9b218a9f21004b62" name="a22a24f9e2ef4e69d9b218a9f21004b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a24f9e2ef4e69d9b218a9f21004b62">&#9670;&#160;</a></span>INSTAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct stat INSTAT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00204">204</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>.</p>

</div>
</div>
<a id="ab743531042b48bca45e8b573f6b5bd3a" name="ab743531042b48bca45e8b573f6b5bd3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab743531042b48bca45e8b573f6b5bd3a">&#9670;&#160;</a></span>LISTF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LISTF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >if != then a list of messages in bin file is generated </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00193">193</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a91f57234737f8b5788971ddfa67c6199" name="a91f57234737f8b5788971ddfa67c6199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f57234737f8b5788971ddfa67c6199">&#9670;&#160;</a></span>OWN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char OWN[] = &quot;bufrnoaa&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00205">205</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, <a class="el" href="bufrnoaa__io_8c_source.html#l00031">print_usage()</a>, <a class="el" href="bufrnoaa__io_8c_source.html#l00114">print_version()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="aa556cb93487ced397bd454a79b602ed7" name="aa556cb93487ced397bd454a79b602ed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa556cb93487ced397bd454a79b602ed7">&#9670;&#160;</a></span>PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char PREFIX[64]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00201">201</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="aa044ceba749fb50960f392fa0551ed24" name="aa044ceba749fb50960f392fa0551ed24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa044ceba749fb50960f392fa0551ed24">&#9670;&#160;</a></span>SEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SEL[64]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Selection string for argument -T according with T1 </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00197">197</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

</div>
</div>
<a id="a2a4e2998b023fe32c30fada0b831e764" name="a2a4e2998b023fe32c30fada0b831e764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a4e2998b023fe32c30fada0b831e764">&#9670;&#160;</a></span>SELECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SELECT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00192">192</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="abcbb9bcb919fa9ed38d90205b37a2b9f" name="abcbb9bcb919fa9ed38d90205b37a2b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcbb9bcb919fa9ed38d90205b37a2b9f">&#9670;&#160;</a></span>SELO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SELO[64]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Selection string for A1 when T2='O' (argument -O) </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00200">200</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa__utils_8c_source.html#l00124">bufr_is_selected()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="aaf03fc95baf8034fd7e699529cee3b84" name="aaf03fc95baf8034fd7e699529cee3b84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf03fc95baf8034fd7e699529cee3b84">&#9670;&#160;</a></span>SELS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SELS[64]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Selection string for A1 when T2='S' (argument -S) <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00198">198</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa__utils_8c_source.html#l00124">bufr_is_selected()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a423f8e138795e25649388f1fd4e676fd" name="a423f8e138795e25649388f1fd4e676fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a423f8e138795e25649388f1fd4e676fd">&#9670;&#160;</a></span>SELU</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SELU[64]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Selection string for A1 when T2='U' (argument -U) <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00199">199</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa__utils_8c_source.html#l00124">bufr_is_selected()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="a0c738ddb1292ea903bdf2e23196c4a47" name="a0c738ddb1292ea903bdf2e23196c4a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c738ddb1292ea903bdf2e23196c4a47">&#9670;&#160;</a></span>SEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SEP[] = &quot;\r\r\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00206">206</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
<a id="ab4e6044af1cc815d38d577334434776e" name="ab4e6044af1cc815d38d577334434776e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4e6044af1cc815d38d577334434776e">&#9670;&#160;</a></span>STAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int STAGE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00192">192</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>.</p>

</div>
</div>
<a id="ab848ce91ba14d3dc5c87d0b42f3a1c0d" name="ab848ce91ba14d3dc5c87d0b42f3a1c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab848ce91ba14d3dc5c87d0b42f3a1c0d">&#9670;&#160;</a></span>VERBOSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VERBOSE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufrnoaa_8c_source.html#l00192">192</a> of file <a class="el" href="bufrnoaa_8c_source.html">bufrnoaa.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac__io_8c_source.html#l00145">bufrtotac_read_args()</a>, <a class="el" href="bufrnoaa_8c_source.html#l00210">main()</a>, and <a class="el" href="bufrnoaa__io_8c_source.html#l00130">read_args()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
